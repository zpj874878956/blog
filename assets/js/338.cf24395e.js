(window.webpackJsonp=window.webpackJsonp||[]).push([[338],{691:function(s,a,t){"use strict";t.r(a);var n=t(0),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"一、makefile简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、makefile简介"}},[s._v("#")]),s._v(" 一、Makefile简介")]),s._v(" "),a("p",[s._v("官网：https://www.gnu.org/software/make/manual")]),s._v(" "),a("h3",{attrs:{id:"_1、makefile是什么"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、makefile是什么"}},[s._v("#")]),s._v(" 1、Makefile是什么")]),s._v(" "),a("p",[s._v("Makefile是一种用于自动化构建程序的工具，它提供了一系列规则来指定源代码文件之间的依赖关系，以及如何生成目标文件。通过使用Makefile，程序员可以有效地管理和组织软件项目的编译过程，从而提高开发效率。")]),s._v(" "),a("p",[s._v("Makefile文件是一个文本文件，其中包含一系列规则和指令，用于编译源代码并生成可执行文件或库。每个规则由一个目标文件、一个或多个依赖文件和一组命令组成，这些命令描述了如何从依赖文件生成目标文件。")]),s._v(" "),a("p",[s._v("Makefile的主要作用是简化或组织编译代码的过程，它可以帮助程序员自动化编译、链接和打包程序。通过将整个项目分解为多个模块，并定义每个模块之间的依赖关系，当某个模块发生变化时，只需要重新编译该模块及其依赖的其他模块即可。这有助于减少手动操作和错误，并提高代码质量。")]),s._v(" "),a("p",[s._v("此外，Makefile还支持变量定义和隐晦规则等特性，这些特性可以帮助程序员更加灵活地编写Makefile，并使构建过程更加易于维护和扩展。")]),s._v(" "),a("h3",{attrs:{id:"_2、make-和-makefile的关系"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、make-和-makefile的关系"}},[s._v("#")]),s._v(" 2、make 和 Makefile的关系")]),s._v(" "),a("p",[s._v("Make是一个命令工具，用于解释和执行Makefile中的指令，完成项目的自动化构建。Makefile是一个文件，其中定义了一系列的规则来指定哪些文件需要先编译、哪些文件需要后编译、哪些文件需要重新编译等。")]),s._v(" "),a("p",[s._v("当我们在命令行中输入make命令时，Make会查找当前目录下是否存在名为Makefile或makefile的文件。如果找到，Make会按照Makefile文件中的规则和指令，自动执行相应的命令来编译和链接源代码文件，生成可执行文件或库。")]),s._v(" "),a("h1",{attrs:{id:"二、makefile-三要素"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、makefile-三要素"}},[s._v("#")]),s._v(" 二、Makefile 三要素")]),s._v(" "),a("p",[s._v("Makefile的三个要素是目标、依赖和命令。它们在Makefile中的格式如下：")]),s._v(" "),a("p",[s._v("目标（Target）：目标是指需要生成的文件或目标体，可以是Object File（一般称为中间文件）、可执行文件或标签。目标定义了生成的目标体，并指明生成目标体需要哪些依赖文件。"),a("br"),s._v("\n依赖（Dependency）：依赖是指生成目标体所需的文件或另一个目标。它可以是一个或多个文件，也可以没有。依赖项描述了目标文件与源文件之间的依赖关系，告诉Make如何从源文件生成目标文件。"),a("br"),s._v("\n命令（Command）：命令是Make需要执行的命令行指令，可以是任意的shell命令。这些命令描述了如何从依赖文件生成目标文件。在Makefile中，命令部分需要有一定的缩进，可以是一行或多行，它们会依次执行。"),a("br"),s._v("\n以下是Makefile三要素的格式示例：")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("目标")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" 依赖  \n    命令\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("其中，目标和依赖之间用冒号（:）分隔，命令部分需要缩进。")]),s._v(" "),a("p",[s._v("示例：")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targeta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("targetb targetc\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targeta"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targetb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetb"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targetc")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetc"')]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("执行make命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetb"')]),s._v("\ntargetb\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetc"')]),s._v("\ntargetc\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targeta"')]),s._v("\ntargeta\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("指定执行命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make targetb")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetb"')]),s._v("\ntargetb\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch targetb")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make targetb\t\t\t# 当前目录下targetb是最新文件不需要改变")]),s._v("\nmake: `targetb' is up to date.\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("修改Makefile文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n.PHONY:targetb\ntargeta:targetb targetc\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targeta"')]),s._v("\n\ntargetb:\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetb"')]),s._v("\n\ntargetc:\n        "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetc"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make targetb")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targetb"')]),s._v("\ntargetb        \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("p",[s._v(".PHONY:targetb的意思是声明``targetb是一个伪目标，即使存在名为targetb的文件。这意味着，每次当你运行make targetb时，make不会尝试查找一个叫做targetb的文件并尝试运行它的命令，而是会执行与targetb` 关联的命令。")]),s._v(" "),a("p",[s._v('在这个例子中，如果你运行 make targetb，它会输出 "targetb"。如果你运行 make targeta，它会首先运行 targetb 和 targetc 的命令，然后执行与 targeta 关联的命令，输出 "targeta"。')]),s._v(" "),a("h1",{attrs:{id:"三、引入makefile管理项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、引入makefile管理项目"}},[s._v("#")]),s._v(" 三、引入Makefile管理项目")]),s._v(" "),a("p",[s._v("生成两个文件")]),s._v(" "),a("div",{staticClass:"language-c line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-c"}},[a("code",[a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("mp3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<stdio.h>")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("play")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"paly music!\\r\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("printf")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"stop music!\\r\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("vim")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token expression"}},[s._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("c")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token macro property"}},[a("span",{pre:!0,attrs:{class:"token directive-hash"}},[s._v("#")]),a("span",{pre:!0,attrs:{class:"token directive keyword"}},[s._v("include")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("<stdio.h>")])]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("play")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("stop")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("p",[s._v("编写Makefile")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("mq3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("main.c mp3.c\n        gcc main.c mp3.c -o mp3\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        rm mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ls")]),s._v("\nmain.c  Makefile  mp3  mp3.c\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./mp3")]),s._v("\npaly music!\nstop music!\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("改造Makefile，目的是将mp3.c和main.c解耦，当修改mp3.c或者main.c时，不需要重新编译另一个文件")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("mq3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("main.o mp3.o\n        gcc main.o mp3.o -o mp3\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("main.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        gcc -c main.c -o main.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("mp3.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        gcc -c mp3.c -o mp3.o\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONE")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        rm mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make clean")]),s._v("\nrm mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./mp3")]),s._v("\npaly music!\nstop music!\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h1",{attrs:{id:"四、makefile的变量和模式匹配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#四、makefile的变量和模式匹配"}},[s._v("#")]),s._v(" 四、Makefile的变量和模式匹配")]),s._v(" "),a("h3",{attrs:{id:"_1、系统变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、系统变量"}},[s._v("#")]),s._v(" 1、系统变量")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("all\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${CC}"')]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${AS}"')]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${MAKE}"')]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${PATH}"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"cc"')]),s._v("\ncc\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"as"')]),s._v("\nas\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"make"')]),s._v("\nmake\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("/usr/local/sbin")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/local/bin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/sbin"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("/usr/bin\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("h3",{attrs:{id:"_2、自定义变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、自定义变量"}},[s._v("#")]),s._v(" 2、自定义变量")]),s._v(" "),a("p",[s._v("1、延迟赋值")]),s._v(" "),a("p",[s._v("在Makefile中，变量的默认赋值方式是“延迟”的。这意味着变量只有在被引用时才会被计算，并且只计算一次。如果一个变量在多个地方被引用，那么只有第一次引用时会被计算，后续的引用会使用第一次计算的结果。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("123\nB"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("456\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("all\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${B}"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"456"')]),s._v("\n456\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("2、立即赋值")]),s._v(" "),a("p",[s._v("为了改变默认的延迟赋值行为，我们可以使用:=操作符进行“立即”赋值。这意味着变量会在声明时立即被计算，并且在之后的所有引用中都会使用这个计算结果。即使变量的值在后续发生了变化，之前的引用也不会受到影响。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("123\nB"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("A"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("456\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("all\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${B}"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123"')]),s._v("\n123        \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("3、空赋值")]),s._v(" "),a("p",[s._v("使用=操作符可以将变量设置为空字符串。这在需要临时清除变量的内容时很有用。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v("123\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#B:=$(A)")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v("456\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("all\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${A}"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123"')]),s._v("\n123        \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("4、追加赋值")]),s._v(" "),a("p",[s._v("如果想要将一个值追加到变量的末尾，可以使用+=操作符。这不会覆盖变量的现有内容，而是将新值添加到变量的末尾。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v("123\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#B:=$(A)")]),s._v("\nA"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+=")]),s._v("456\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("all\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"${A}"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"123 456"')]),s._v("\n123 456\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h3",{attrs:{id:"_3、自动化变量"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、自动化变量"}},[s._v("#")]),s._v(" 3、自动化变量")]),s._v(" "),a("p",[s._v("1、$<")]),s._v(" "),a("p",[s._v("代表第一个依赖项。在规则的命令部分，$<将被替换为第一个依赖项的文件名。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("targeta targetb\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$<"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targeta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targetb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targeta"')]),s._v("\ntargeta\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("2、$^")]),s._v(" "),a("p",[s._v("代表所有的依赖项。在规则的命令部分，$^将被替换为一个空格分隔的列表，包含了所有依赖项的文件名")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("targeta targetb\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$^"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targeta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targetb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"targeta targetb"')]),s._v("\ntargeta targetb\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("3、$@")]),s._v(" "),a("p",[s._v("代表目标文件。在规则的命令部分，$@将被替换为目标文件的名字。")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("targeta targetb\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$@"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targeta")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("targetb")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"all"')]),s._v("\nall\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"_4、变量使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4、变量使用"}},[s._v("#")]),s._v(" 4、变量使用")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nCC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcc\nTARGET"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mp3\nOBJS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("main.o mp3.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(TARGET)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OBJS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("main.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("main.c\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -c main.c -o main.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("mp3.o")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("mp3.c\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -c mp3.c -o mp3.o\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        rm mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\ngcc main.o mp3.o -o mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./mp3")]),s._v("\npaly music!\nstop music!\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br")])]),a("h3",{attrs:{id:"_5、模式匹配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5、模式匹配"}},[s._v("#")]),s._v(" 5、模式匹配")]),s._v(" "),a("p",[s._v("%：匹配任意多个非空字符")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("%")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"$@"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make test\t\t\t# make后跟任意字符")]),s._v("\necho "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test"')]),s._v("\ntest\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("优化Makefile")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nCC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcc\nTARGET"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mp3\nOBJS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("main.o mp3.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(TARGET)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OBJS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 因为.o文件默认使用.c文件来进行编译，所以可以注释以下两行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#%.o:%.c")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#        ${CC} -c $< -o $@")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        rm mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\ngcc main.o mp3.o -o mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ./mp3")]),s._v("\npaly music!\nstop music!\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h1",{attrs:{id:"五、makefile的条件分支"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#五、makefile的条件分支"}},[s._v("#")]),s._v(" 五、Makefile的条件分支")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim Makefile")]),s._v("\nARCH "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" x86\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ifeq")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ARCH"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(",x86"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        CC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("gcc\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n        CC"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("arm-linux-gnueabihf-gcc\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("endif")]),s._v("\n\nTARGET"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("mp3\nOBJS"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("main.o mp3.o\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(TARGET)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("OBJS"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CC"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$^")]),s._v(" -o "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$@")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin-target builtin"}},[s._v(".PHONY")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("clean\n\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n        rm mp3 *.o\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make")]),s._v("\ngcc    -c -o mp3.o mp3.c\ngcc main.o mp3.o -o mp3\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make ARCH=arm")]),s._v("\narm-linux-gnueabihf-gcc    -c -o mp3.o mp3.c\narm-linux-gnueabihf-gcc main.o mp3.o -o mp3\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("h1",{attrs:{id:"六、makefile管理docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#六、makefile管理docker"}},[s._v("#")]),s._v(" 六、Makefile管理Docker")]),s._v(" "),a("h3",{attrs:{id:"_1、创建一个dockerfile"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1、创建一个dockerfile"}},[s._v("#")]),s._v(" 1、创建一个Dockerfile")]),s._v(" "),a("div",{staticClass:"language-docker line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-docker"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("FROM")]),s._v(" nginx")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("RUN")]),s._v(" echo "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'<h1>Hello World!</h1>'")]),s._v(" > /usr/share/nginx/html/index.html")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h3",{attrs:{id:"_2、创建makefile文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2、创建makefile文件"}},[s._v("#")]),s._v(" 2、创建Makefile文件")]),s._v(" "),a("div",{staticClass:"language-makefile line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-makefile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 定义 Docker 镜像名称和标签  ")]),s._v("\nREGISTRY "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" your-"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("private")]),s._v("-registry  \nUSERNAME "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" your-username  \nPASSWORD "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" your-password  \nTAG "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" latest  \nIMAGE "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":=")]),s._v(" my-web  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 这是一个条件赋值。如果变量 CONTAINER_NAME 还没有被赋值，那么它会被赋值为 my-container")]),s._v("\nCONTAINER_NAME "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?=")]),s._v(" my-container\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 构建镜像 ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker-build  \n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("    docker build -t "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(IMAGE)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" .  \n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 上传镜像到私有仓库  ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("upload")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker-push  \n    docker login -u "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("USERNAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" -p "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("PASSWORD"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("REGISTRY"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("    docker push "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),s._v("(IMAGE)")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n  \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 运行镜像")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker-run  \n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("    docker run -p 80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("80 "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONTAINER_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("IMAGE"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TAG"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 停止并删除容器")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token target symbol"}},[s._v("clean")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" docker-stop docker-rm  \n    docker stop "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONTAINER_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    docker rm "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("CONTAINER_NAME"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  \n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("h3",{attrs:{id:"_3、执行命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3、执行命令"}},[s._v("#")]),s._v(" 3、执行命令")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make build")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make upload")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make run")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# make clean")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("hr"),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.gaoyufu.cn/archives/5MWNnzgZ",target:"_blank",rel:"noopener noreferrer"}},[s._v("原文链接"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=e.exports}}]);