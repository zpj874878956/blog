(window.webpackJsonp=window.webpackJsonp||[]).push([[357],{710:function(s,a,e){"use strict";e.r(a);var t=e(0),n=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("一、zabbix agent简介")]),s._v(" "),a("p",[s._v("zabbix是一个基于WEB界面的提供分布式系统监视以及网络监视功能的企业级的开源解决方案。 zabbix能监视各种网络参数，保证服务器系统的安全运营；并提供灵活的通知机制以让系统管理员快速定位/解决存在的各种问题。\n  zabbix主要由2部分构成，zabbix server与可选组件zabbix agent。zabbix agent需要安装到被监控的主机上，它负责定期收集各项数据，并发送到zabbix server端，zabbix server将数据存储到数据库中，zabbix web根据数据在前端进行展现和绘图。这里agent收集数据分为主动和被动两种模式：")]),s._v(" "),a("p",[s._v("主动：agent请求server获取主动的监控项列表，并主动将监控项内需要检测的数据提交给server/proxy\n被动：server向agent请求获取监控项的数据，agent返回数据。")]),s._v(" "),a("p",[s._v("二、安装及配置步骤")]),s._v(" "),a("p",[s._v("zabbix agent的安装方式主要有源码安装、rpm包安装、二进制包安装等多种方式，本文介绍YUM方式rpm包安装，此方式安装步骤简单、快捷。")]),s._v(" "),a("p",[s._v("1.下载安装zabbix yum源文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rpm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Uvh")]),s._v(" https://repo.zabbix.com/zabbix/5.2/rhel/7/x86_64/zabbix-release-5.2-1.el7.noarch.rpm\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("2.配置zabbix_agentd.conf")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("admin@host-172-16-50-8 ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" /etc/zabbix/zabbix_agentd.conf "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Ev")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"^#|^$"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PidFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/run/zabbix/zabbix_agentd.pid\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LogFile")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/var/log/zabbix/zabbix_agentd.log\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LogFileSize")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Server")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.120\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ServerActive")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".0.120:10051\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Hostname")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("host-172-16-50-8\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Include")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/zabbix/zabbix_agentd.d/*.con\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("三、zabbix_agentd.conf配置参数文件说明")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("AllowRoot 默认值：0 是否允许使用root身份运行zabbix，如果值为0，并且是在root环境下，zabbix会尝试使用zabbix用户运行，如果不存在会告知zabbix用户不存在。 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - 不允许 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - 允许\nBufferSend 取值范围：1-3600 默认值：5 数据存储在buffer中最长多少秒\nBufferSize 取值范围：2-65535 默认值：100 buffer最大值，如果buffer满了，zabbix将会将检索到的数据发送给zabbix server或者proxy\nDebugLevel 取值范围：0-5 默认值：3 指定日志级别 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - basic information about starting and stopping of Zabbix processes "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - critical级别 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" - error级别 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" - warnings级别 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" - debug级别 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" - extended debugging "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("与级别4一样. 只能使用runtime control 来设置."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nEnableRemoteCommands 默认值：0 是否运行zabbix server在此服务器上执行远程命令 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - 禁止 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - 允许\nHostMetadata 取值范围：0-255 字符 仅用于主机自动注册功能，如果当前值为定义，那么它的值默认为HostMetadataItem的值。这个选项在2.2.0之后加入，并且确保支付不能超过限制，以及字符串必须是UTF8，否则服务器无法启动\nHostMetadataItem 功能同上，如果HostMetadata值未设置，这个配置才有效。支持使用UserParameters、alias、system.run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nHostname 默认值：HostnameItem配置的值 主机名，必须唯一，区分大小写。Hostname必须和zabbix web上配置的一直，否则zabbix主动监控无法正常工作。为什么呢？因为agent拿着这个主机名去问server，我有配置主动监控项 吗？server拿着这个主机名去配置里面查询，然后返回信息。 支持字符：数字字母、’.’、’ '、 ‘_’、 ‘-’，不超过64个字符\nHostnameItem 默认值:system.hostname 设置主机名，只有当HostMetadata没设置，她才生效。不支持UserParameters 、aliases，支持system.run"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nInclude 包含自配置文件，不同的配置写到不同的文件中，然后include，配置文件会显得规范。例如: /absolute/path/to/config/files/*.conf. Zabbix "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.4")]),s._v(".0开始支持正则表达式。\nListenIP 默认值：0.0.0.0 监听IP地址，默认为所有接口，多个ip之间使用逗号分隔\nListenPort 取值范围：1024-32767 默认值10050 监听端口\nLoadModule 加载模块文件，可以写多个 格式: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LoadModule")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" 必须配置LoadModulePath\nLoadModulePath 模块路径，绝对路径\nLogFile 日志文件路径 如果未配置，日志会记录到syslog中\nLogFileSize 取值范围:0-1024 默认值：1 日志文件大小，单位为MB。 "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - 关闭自动轮滚. 备注：如果日志文件到达了最大值并且文件轮滚失败，那么老日志文件会被清空掉。\nLogRemoteCommands 默认值：0 记录原型执行的shell命令日志，级别为warrning "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" - disabled "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" - enabled\nMaxLinesPerSecond 取值范围：1-1000 默认值：100 处理监控类型为log何eventlog日志时，agent每秒最大发送的行数。默认为100行\nPidFile 默认值:/tmp/zabbix_agentd.pid PID文件名\nRefreshActiveChecks 取值范围：60-3600 默认值：120 多久时间（秒）刷新一次主动监控配置信息，如果刷新失败，那么60秒之后会重试一次\nServer zabbix server的ip地址，多个ip使用逗号分隔\nServerActive zabbix 主动监控server的ip地址，使用逗号分隔多IP，如果注释这个选项，那么当前服务器的主动监控就被禁用了\nSourceIP zabbix对外连接的出口IP地址\nStartAgents 取值范围：0-100 默认值：3 zabbix启动之后开启被动监控的进程数量，如果设置为0，那么zabbix被动监控被禁用，并且不会监听相应端口，也就是说10050端口不会开启。\nTimeout 默认值：1-30 默认值：3 超时时间，单位秒\nUnsafeUserParameters 取值范围：0,1 默认值： "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 允许所有字符的参数传递给用户定义的参数。\nUser 默认值：zabbix 运行zabbix程序的用户，如果AllowRoot被禁用，才有效果\nUserParameter 用户自定义key，格式: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("UserParameter")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(", 例如：serParameter"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("system.test,who"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("wc")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-l")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);