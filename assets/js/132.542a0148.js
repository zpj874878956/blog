(window.webpackJsonp=window.webpackJsonp||[]).push([[132],{486:function(e,s,n){"use strict";n.r(s);var a=n(0),t=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("GitLab Runner注册")]),e._v(" "),s("p",[e._v("参考链接："),s("a",{attrs:{href:"https://help.aliyun.com/document_detail/106968.html#title-xfl-dp6-kta",target:"_blank",rel:"noopener noreferrer"}},[e._v("使用GitLab CI运行GitLab Runner并执行Pipeline_容器服务 Kubernetes 版 ACK(ACK)-阿里云帮助中心"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("大概过程： 获取runner token -> 进行注册")]),e._v(" "),s("h2",{attrs:{id:"gitlabrunner-类型"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#gitlabrunner-类型"}},[e._v("#")]),e._v(" GitLabRunner 类型")]),e._v(" "),s("ul",[s("li",[e._v("shared ： 运行整个平台项目的作业（gitlab）")]),e._v(" "),s("li",[e._v("group： 运行特定group下的所有项目的作业（group）")]),e._v(" "),s("li",[e._v("specific: 运行指定的项目作业（project）")]),e._v(" "),s("li",[e._v("locked： 无法运行项目作业")]),e._v(" "),s("li",[e._v("paused： 不会运行作业")])]),e._v(" "),s("h2",{attrs:{id:"获取runner-token"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#获取runner-token"}},[e._v("#")]),e._v(" 获取runner token")]),e._v(" "),s("p",[s("strong",[e._v("获取"),s("code",[e._v("shared")]),e._v("类型runnertoken")])]),e._v(" "),s("p",[e._v("进入系统设置 -> Runners")]),e._v(" "),s("p",[s("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/03/9ac4c01c63c3ceda.png",alt:"9ac4c01c63c3ceda.png"}})]),e._v(" "),s("p",[e._v("获取"),s("code",[e._v("group")]),e._v("类型的runnertoken**")]),e._v(" "),s("p",[e._v("进入group -> Settings -> CI/CD -> Runners -> Group Runners")]),e._v(" "),s("p",[s("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/03/2d294332ae3da624.png",alt:"2d294332ae3da624.png"}})]),e._v(" "),s("p",[s("strong",[e._v("获取"),s("code",[e._v("specific")]),e._v("类型的runnertoken")])]),e._v(" "),s("p",[e._v("进入具体的项目 -> Settings -> CI/CD -> Runners -> Specific Runners")]),e._v(" "),s("p",[s("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/03/cec67eb35316bc08.png",alt:"cec67eb35316bc08.png"}})]),e._v(" "),s("p",[e._v("进行注册")]),e._v(" "),s("h3",{attrs:{id:"docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker"}},[e._v("#")]),e._v(" Docker")]),e._v(" "),s("p",[e._v("方式1： 启动容器交互式注册")]),e._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("docker")]),e._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("--rm")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-t")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-i")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[e._v("-v")]),e._v(" ~/data/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner:v12.6.0 register\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Runtime platform                                    arch=amd64 os=linux pid=6 revision=ac8e767a version=12.6.0\nRunning in system-mode.\n\nPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\nhttp://192.168.1.105\nPlease enter the gitlab-ci token for this runner:\n4tutaeWWL3srNEcmHs1s\nPlease enter the gitlab-ci description for this runner:\n[00e4f023b5ae]: devops-service-runner\nPlease enter the gitlab-ci tags for this runner (comma separated):\nbuild\nRegistering runner... succeeded                     runner=4tutaeWW\nPlease enter the executor: parallels, virtualbox, docker-ssh+machine, kubernetes, docker+machine, custom, docker, docker-ssh, shell, ssh:\nshell\nRunner registered successfully. Feel free to start it, but if it's running already the config should be automatically reloaded!\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br")])]),s("p",[e._v("方式2：直接注册")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run --rm -v ~/data/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner:v12.6.0 register \\\n  --non-interactive \\\n  --executor "docker" \\\n  --docker-image alpine:latest \\\n  --url "http://192.168.1.200:30088/" \\\n  --registration-token "JRzzw2j1Ji6aBjwvkxAv" \\\n  --description "docker-runner" \\\n  --tag-list "docker,aws" \\\n  --run-untagged="true" \\\n  --locked="false" \\\n  --access-level="not_protected"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run -it --rm -v ~/data/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner:v12.6.0 register \\\n  --non-interactive \\\n  --executor "shell" \\\n  --url "http://gitlab.devops.com" \\\n  --registration-token "FZwnmCacrXfk37yZzfNJ" \\\n  --description "devops-runner" \\\n  --tag-list "build,deploy" \\\n  --run-untagged="true" \\\n  --locked="false" \\\n  --access-level="not_protected"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run -itd --rm -v ~/data/gitlab-runner/config:/etc/gitlab-runner  gitlab/gitlab-runner:v12.6.0 register \\\n  --non-interactive \\\n  --executor "shell" \\\n  --url "http://192.168.1.200:30088/" \\\n  --registration-token "JRzzw2j1Ji6aBjwvkxAv" \\\n  --description "devops-runner" \\\n  --tag-list "build,deploy" \\\n  --run-untagged="true" \\\n  --locked="false" \\\n  --access-level="not_protected"\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[e._v("效果")]),e._v(" "),s("p",[s("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/03/1e70a783c67a71f7.png",alt:"1e70a783c67a71f7.png"}})]),e._v(" "),s("p",[e._v("其他变量")]),e._v(" "),s("p",[e._v("关于注册的选项")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('   -c value, --config value                                     指定配置文件\n   --template-config value                                      指定模板配置文件\n   --tag-list value                                             指定runner的标签列表，逗号分隔\n   -n, --non-interactive                                        无交互进行runner注册 \n   --leave-runner                                               如果注册失败，不用删除runner \n   -r value, --registration-token value                         runner的注册token\n   --run-untagged                              注册运行未加标签的构建，默认当标签列表为空时值为true\n   --locked                                                     锁定runner 默认true\n   --access-level value        设置访问等级 not_protected or ref_protected; 默认 not_protected \n   --maximum-timeout value                             为作业设置最大运行超时时间 默认零 单位秒\n   --paused                                            设置runner为 paused,默认 \'false\' \n   --name value, --description value                            Runner 名称 \n   --limit value                                       程序处理的最大构建数量default: "0"\n   --output-limit value                                最大的构建大小单位kb default: "0"\n   --request-concurrency value                         作业请求的最大并发数 default: "0"\n   -u value, --url value                                        GitlabCI服务器地址\n   -t value, --token value                                      GitlabCI服务器token\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('root@82948f0a37e3:/# gitlab-runner register --help\nRuntime platform                                    arch=amd64 os=linux pid=168 revision=ac8e767a version=12.6.0\nNAME:\n   gitlab-runner register - register a new runner\n\nUSAGE:\n   gitlab-runner register [command options] [arguments...]\n\nOPTIONS:\n\n\n\n   --tls-ca-file value                                          File containing the certificates to verify the peer when using HTTPS [$CI_SERVER_TLS_CA_FILE]\n   --tls-cert-file value                                        File containing certificate for TLS client auth when using HTTPS [$CI_SERVER_TLS_CERT_FILE]\n   --tls-key-file value                                         File containing private key for TLS client auth when using HTTPS [$CI_SERVER_TLS_KEY_FILE]\n\n\n   --executor value                                             选择执行器，例如shell，docker \n   --builds-dir value                                           设置构建存储目录\n   --cache-dir value                                            设置构建缓存目录\n   --clone-url value                                            覆盖默认通过git克隆的URL\n   --env value                                                  注入自定义环境变量以构建环境\n   --pre-clone-script value                           在提取代码之前执行的特定于运行程序的命令脚本\n   --pre-build-script value              特定于运行程序的命令脚本，在提取代码之后，在构建执行之前执行\n   --post-build-script value            特定于运行程序的命令脚本，在提取代码后以及在构建执行后立即执行\n   --debug-trace-disabled               设置为true时，Runner将禁用使用CI_DEBUG_TRACE功能的可能性                        \n   --shell value                        选择 bash, cmd or powershell [$RUNNER_SHELL]\n   --custom_build_dir-enabled           启用作业特定的构建目录[$CUSTOM_BUILD_DIR_ENABLED]\n   --ssh-user value                                             ssh用户名称 [$SSH_USER]\n   --ssh-password value                                         ssh用户密码[$SSH_PASSWORD]\n   --ssh-host value                                             ssh远程主机[$SSH_HOST]\n   --ssh-port value                                             ssh远程主机端口 [$SSH_PORT]\n   --ssh-identity-file value                               ssh认证文件 [$SSH_IDENTITY_FILE]\n\n\n   --docker-host value                                          Docker主机地址 [$DOCKER_HOST]\n   --docker-cert-path value                                Docker证书路径 [$DOCKER_CERT_PATH]\n   --docker-tlsverify                             Docker使用TLS并验证远程 [$DOCKER_TLS_VERIFY]\n   --docker-hostname value                                自定义容器主机名称 [$DOCKER_HOSTNAME]\n   --docker-image value                                         定义Docker镜像[$DOCKER_IMAGE]\n   --docker-runtime value                        Docker runtime to be used [$DOCKER_RUNTIME]\n   --docker-memory value                   内存限制 Unit [b, k, m, or g]  4M [$DOCKER_MEMORY]\n   --docker-memory-swap value 内存限制memory + swap，Unit[b, k, m, or g][$DOCKER_MEMORY_SWAP]\n   --docker-memory-reservation value                   内存软限制[$DOCKER_MEMORY_RESERVATION]\n   --docker-cpuset-cpus value                                   cpu限制[$DOCKER_CPUSET_CPUS]\n   --docker-cpus value                                         cpu数量 [$DOCKER_CPUS]\n   --docker-cpu-shares value                 CPU shares (default: "0") [$DOCKER_CPU_SHARES]\n   --docker-dns value                                           A list of DNS servers for the container to use [$DOCKER_DNS]\n   --docker-dns-search value                                    A list of DNS search domains [$DOCKER_DNS_SEARCH]\n   --docker-privileged                                          Give extended privileges to container [$DOCKER_PRIVILEGED]\n   --docker-disable-entrypoint-overwrite                        Disable the possibility for a container to overwrite the default image entrypoint [$DOCKER_DISABLE_ENTRYPOINT_OVERWRITE]\n   --docker-userns value                                        User namespace to use [$DOCKER_USERNS_MODE]\n   --docker-cap-add value                                       Add Linux capabilities [$DOCKER_CAP_ADD]\n   --docker-cap-drop value                                      Drop Linux capabilities [$DOCKER_CAP_DROP]\n   --docker-oom-kill-disable                                    Do not kill processes in a container if an out-of-memory (OOM) error occurs [$DOCKER_OOM_KILL_DISABLE]\n   --docker-oom-score-adjust value                              Adjust OOM score (default: "0") [$DOCKER_OOM_SCORE_ADJUST]\n   --docker-security-opt value                                  Security Options [$DOCKER_SECURITY_OPT]\n   --docker-devices value                                       Add a host device to the container [$DOCKER_DEVICES]\n   --docker-disable-cache                                       Disable all container caching [$DOCKER_DISABLE_CACHE]\n   --docker-volumes value                                       Bind-mount a volume and create it if it doesn\'t exist prior to mounting. Can be specified multiple times once per mountpoint, e.g. --docker-volumes \'test0:/test0\' --docker-volumes \'test1:/test1\' [$DOCKER_VOLUMES]\n   --docker-volume-driver value                                 Volume driver to be used [$DOCKER_VOLUME_DRIVER]\n   --docker-cache-dir value                                     Directory where to store caches [$DOCKER_CACHE_DIR]\n   --docker-extra-hosts value                                   Add a custom host-to-IP mapping [$DOCKER_EXTRA_HOSTS]\n   --docker-volumes-from value                                  A list of volumes to inherit from another container [$DOCKER_VOLUMES_FROM]\n   --docker-network-mode value                                  Add container to a custom network [$DOCKER_NETWORK_MODE]\n   --docker-links value                                         Add link to another container [$DOCKER_LINKS]\n   --docker-services value                                      Add service that is started with container [$DOCKER_SERVICES]\n   --docker-wait-for-services-timeout value                     How long to wait for service startup (default: "0") [$DOCKER_WAIT_FOR_SERVICES_TIMEOUT]\n   --docker-allowed-images value                                Whitelist allowed images [$DOCKER_ALLOWED_IMAGES]\n   --docker-allowed-services value                              Whitelist allowed services [$DOCKER_ALLOWED_SERVICES]\n   --docker-pull-policy value                                   Image pull policy: never, if-not-present, always [$DOCKER_PULL_POLICY]\n   --docker-shm-size value                                      Shared memory size for docker images (in bytes) (default: "0") [$DOCKER_SHM_SIZE]\n   --docker-tmpfs value                                         A toml table/json object with the format key=values. When set this will mount the specified path in the key as a tmpfs volume in the main container, using the options specified as key. For the supported options, see the documentation for the unix \'mount\' command (default: "{}") [$DOCKER_TMPFS]\n   --docker-services-tmpfs value                                A toml table/json object with the format key=values. When set this will mount the specified path in the key as a tmpfs volume in all the service containers, using the options specified as key. For the supported options, see the documentation for the unix \'mount\' command (default: "{}") [$DOCKER_SERVICES_TMPFS]\n   --docker-sysctls value                                       Sysctl options, a toml table/json object of key=value. Value is expected to be a string. (default: "{}") [$DOCKER_SYSCTLS]\n   --docker-helper-image value                                  [ADVANCED] Override the default helper image used to clone repos and upload artifacts [$DOCKER_HELPER_IMAGE]\n\n\n\n\n\n\n   --parallels-base-name value                                  VM name to be used [$PARALLELS_BASE_NAME]\n   --parallels-template-name value                              VM template to be created [$PARALLELS_TEMPLATE_NAME]\n   --parallels-disable-snapshots                                Disable snapshoting to speedup VM creation [$PARALLELS_DISABLE_SNAPSHOTS]\n   --parallels-time-server value                                Timeserver to sync the guests time from. Defaults to time.apple.com [$PARALLELS_TIME_SERVER]\n   --virtualbox-base-name value                                 VM name to be used [$VIRTUALBOX_BASE_NAME]\n   --virtualbox-base-snapshot value                             Name or UUID of a specific VM snapshot to clone [$VIRTUALBOX_BASE_SNAPSHOT]\n   --virtualbox-disable-snapshots                               Disable snapshoting to speedup VM creation [$VIRTUALBOX_DISABLE_SNAPSHOTS]\n   --cache-type value                                           Select caching method [$CACHE_TYPE]\n   --cache-path value                                           Name of the path to prepend to the cache URL [$CACHE_PATH]\n   --cache-shared                                               Enable cache sharing between runners. [$CACHE_SHARED]\n   --cache-s3-server-address value                              A host:port to the used S3-compatible server [$CACHE_S3_SERVER_ADDRESS]\n   --cache-s3-access-key value                                  S3 Access Key [$CACHE_S3_ACCESS_KEY]\n   --cache-s3-secret-key value                                  S3 Secret Key [$CACHE_S3_SECRET_KEY]\n   --cache-s3-bucket-name value                                 Name of the bucket where cache will be stored [$CACHE_S3_BUCKET_NAME]\n   --cache-s3-bucket-location value                             Name of S3 region [$CACHE_S3_BUCKET_LOCATION]\n   --cache-s3-insecure                                          Use insecure mode (without https) [$CACHE_S3_INSECURE]\n   --cache-gcs-access-id value                                  ID of GCP Service Account used to access the storage [$CACHE_GCS_ACCESS_ID]\n   --cache-gcs-private-key value                                Private key used to sign GCS requests [$CACHE_GCS_PRIVATE_KEY]\n   --cache-gcs-credentials-file value                           File with GCP credentials, containing AccessID and PrivateKey [$GOOGLE_APPLICATION_CREDENTIALS]\n   --cache-gcs-bucket-name value                                Name of the bucket where cache will be stored [$CACHE_GCS_BUCKET_NAME]\n   --machine-idle-nodes value                                   Maximum idle machines (default: "0") [$MACHINE_IDLE_COUNT]\n   --machine-idle-time value                                    Minimum time after node can be destroyed (default: "0") [$MACHINE_IDLE_TIME]\n   --machine-max-builds value                                   Maximum number of builds processed by machine (default: "0") [$MACHINE_MAX_BUILDS]\n   --machine-machine-driver value                               The driver to use when creating machine [$MACHINE_DRIVER]\n   --machine-machine-name value                                 The template for machine name (needs to include %s) [$MACHINE_NAME]\n   --machine-machine-options value                              Additional machine creation options [$MACHINE_OPTIONS]\n   --machine-off-peak-periods value                             Time periods when the scheduler is in the OffPeak mode [$MACHINE_OFF_PEAK_PERIODS]\n   --machine-off-peak-timezone value                            Timezone for the OffPeak periods (defaults to Local) [$MACHINE_OFF_PEAK_TIMEZONE]\n   --machine-off-peak-idle-count value                          Maximum idle machines when the scheduler is in the OffPeak mode (default: "0") [$MACHINE_OFF_PEAK_IDLE_COUNT]\n   --machine-off-peak-idle-time value                           Minimum time after machine can be destroyed when the scheduler is in the OffPeak mode (default: "0") [$MACHINE_OFF_PEAK_IDLE_TIME]\n   --kubernetes-host value                                      Optional Kubernetes master host URL (auto-discovery attempted if not specified) [$KUBERNETES_HOST]\n   --kubernetes-cert-file value                                 Optional Kubernetes master auth certificate [$KUBERNETES_CERT_FILE]\n   --kubernetes-key-file value                                  Optional Kubernetes master auth private key [$KUBERNETES_KEY_FILE]\n   --kubernetes-ca-file value                                   Optional Kubernetes master auth ca certificate [$KUBERNETES_CA_FILE]\n   --kubernetes-bearer_token_overwrite_allowed                  Bool to authorize builds to specify their own bearer token for creation. [$KUBERNETES_BEARER_TOKEN_OVERWRITE_ALLOWED]\n   --kubernetes-bearer_token value                              Optional Kubernetes service account token used to start build pods. [$KUBERNETES_BEARER_TOKEN]\n   --kubernetes-image value                                     Default docker image to use for builds when none is specified [$KUBERNETES_IMAGE]\n   --kubernetes-namespace value                                 Namespace to run Kubernetes jobs in [$KUBERNETES_NAMESPACE]\n   --kubernetes-namespace_overwrite_allowed value               Regex to validate \'KUBERNETES_NAMESPACE_OVERWRITE\' value [$KUBERNETES_NAMESPACE_OVERWRITE_ALLOWED]\n   --kubernetes-privileged                                      Run all containers with the privileged flag enabled [$KUBERNETES_PRIVILEGED]\n   --kubernetes-cpu-limit value                                 The CPU allocation given to build containers [$KUBERNETES_CPU_LIMIT]\n   --kubernetes-memory-limit value                              The amount of memory allocated to build containers [$KUBERNETES_MEMORY_LIMIT]\n   --kubernetes-service-cpu-limit value                         The CPU allocation given to build service containers [$KUBERNETES_SERVICE_CPU_LIMIT]\n   --kubernetes-service-memory-limit value                      The amount of memory allocated to build service containers [$KUBERNETES_SERVICE_MEMORY_LIMIT]\n   --kubernetes-helper-cpu-limit value                          The CPU allocation given to build helper containers [$KUBERNETES_HELPER_CPU_LIMIT]\n   --kubernetes-helper-memory-limit value                       The amount of memory allocated to build helper containers [$KUBERNETES_HELPER_MEMORY_LIMIT]\n   --kubernetes-cpu-request value                               The CPU allocation requested for build containers [$KUBERNETES_CPU_REQUEST]\n   --kubernetes-memory-request value                            The amount of memory requested from build containers [$KUBERNETES_MEMORY_REQUEST]\n   --kubernetes-service-cpu-request value                       The CPU allocation requested for build service containers [$KUBERNETES_SERVICE_CPU_REQUEST]\n   --kubernetes-service-memory-request value                    The amount of memory requested for build service containers [$KUBERNETES_SERVICE_MEMORY_REQUEST]\n   --kubernetes-helper-cpu-request value                        The CPU allocation requested for build helper containers [$KUBERNETES_HELPER_CPU_REQUEST]\n   --kubernetes-helper-memory-request value                     The amount of memory requested for build helper containers [$KUBERNETES_HELPER_MEMORY_REQUEST]\n   --kubernetes-pull-policy value                               Policy for if/when to pull a container image (never, if-not-present, always). The cluster default will be used if not set [$KUBERNETES_PULL_POLICY]\n   --kubernetes-node-selector value                             A toml table/json object of key=value. Value is expected to be a string. When set this will create pods on k8s nodes that match all the key=value pairs. (default: "{}") [$KUBERNETES_NODE_SELECTOR]\n   --kubernetes-node-tolerations value                          A toml table/json object of key=value:effect. Value and effect are expected to be strings. When set, pods will tolerate the given taints. Only one toleration is supported through environment variable configuration. (default: "{}") [$KUBERNETES_NODE_TOLERATIONS]\n   --kubernetes-image-pull-secrets value                        A list of image pull secrets that are used for pulling docker image [$KUBERNETES_IMAGE_PULL_SECRETS]\n   --kubernetes-helper-image value                              [ADVANCED] Override the default helper image used to clone repos and upload artifacts [$KUBERNETES_HELPER_IMAGE]\n   --kubernetes-terminationGracePeriodSeconds value             Duration after the processes running in the pod are sent a termination signal and the time when the processes are forcibly halted with a kill signal. (default: "0") [$KUBERNETES_TERMINATIONGRACEPERIODSECONDS]\n   --kubernetes-poll-interval value                             How frequently, in seconds, the runner will poll the Kubernetes pod it has just created to check its status (default: "0") [$KUBERNETES_POLL_INTERVAL]\n   --kubernetes-poll-timeout value                              The total amount of time, in seconds, that needs to pass before the runner will timeout attempting to connect to the pod it has just created (useful for queueing more builds that the cluster can handle at a time) (default: "0") [$KUBERNETES_POLL_TIMEOUT]\n   --kubernetes-pod-labels value                                A toml table/json object of key-value. Value is expected to be a string. When set, this will create pods with the given pod labels. Environment variables will be substituted for values here. (default: "{}")\n   --kubernetes-service-account value                           Executor pods will use this Service Account to talk to kubernetes API [$KUBERNETES_SERVICE_ACCOUNT]\n   --kubernetes-service_account_overwrite_allowed value         Regex to validate \'KUBERNETES_SERVICE_ACCOUNT\' value [$KUBERNETES_SERVICE_ACCOUNT_OVERWRITE_ALLOWED]\n   --kubernetes-pod-annotations value                           A toml table/json object of key-value. Value is expected to be a string. When set, this will create pods with the given annotations. Can be overwritten in build with KUBERNETES_POD_ANNOTATION_* variables (default: "{}")\n   --kubernetes-pod_annotations_overwrite_allowed value         Regex to validate \'KUBERNETES_POD_ANNOTATIONS_*\' values [$KUBERNETES_POD_ANNOTATIONS_OVERWRITE_ALLOWED]\n   --kubernetes-pod-security-context-fs-group value             A special supplemental group that applies to all containers in a pod [$KUBERNETES_POD_SECURITY_CONTEXT_FS_GROUP]\n   --kubernetes-pod-security-context-run-as-group value         The GID to run the entrypoint of the container process [$KUBERNETES_POD_SECURITY_CONTEXT_RUN_AS_GROUP]\n   --kubernetes-pod-security-context-run-as-non-root value      Indicates that the container must run as a non-root user [$KUBERNETES_POD_SECURITY_CONTEXT_RUN_AS_NON_ROOT]\n   --kubernetes-pod-security-context-run-as-user value          The UID to run the entrypoint of the container process [$KUBERNETES_POD_SECURITY_CONTEXT_RUN_AS_USER]\n   --kubernetes-pod-security-context-supplemental-groups value  A list of groups applied to the first process run in each container, in addition to the container\'s primary GID\n   --kubernetes-services value                                  Add service that is started with container\n   --custom-config-exec value                                   Executable that allows to inject configuration values to the executor [$CUSTOM_CONFIG_EXEC]\n   --custom-config-args value                                   Arguments for the config executable\n   --custom-config-exec-timeout value                           Timeout for the config executable (in seconds) [$CUSTOM_CONFIG_EXEC_TIMEOUT]\n   --custom-prepare-exec value                                  Executable that prepares executor [$CUSTOM_PREPARE_EXEC]\n   --custom-prepare-args value                                  Arguments for the prepare executable\n   --custom-prepare-exec-timeout value                          Timeout for the prepare executable (in seconds) [$CUSTOM_PREPARE_EXEC_TIMEOUT]\n   --custom-run-exec value                                      Executable that runs the job script in executor [$CUSTOM_RUN_EXEC]\n   --custom-run-args value                                      Arguments for the run executable\n   --custom-cleanup-exec value                                  Executable that cleanups after executor run [$CUSTOM_CLEANUP_EXEC]\n   --custom-cleanup-args value                                  Arguments for the cleanup executable\n   --custom-cleanup-exec-timeout value                          Timeout for the cleanup executable (in seconds) [$CUSTOM_CLEANUP_EXEC_TIMEOUT]\n   --custom-graceful-kill-timeout value                         Graceful timeout for scripts execution after SIGTERM is sent to the process (in seconds). This limits the time given for scripts to perform the cleanup before exiting [$CUSTOM_GRACEFUL_KILL_TIMEOUT]\n   --custom-force-kill-timeout value                            Force timeout for scripts execution (in seconds). Counted from the force kill call; if process will be not terminated, Runner will abandon process termination and log an error [$CUSTOM_FORCE_KILL_TIMEOUT]\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br"),s("span",{staticClass:"line-number"},[e._v("31")]),s("br"),s("span",{staticClass:"line-number"},[e._v("32")]),s("br"),s("span",{staticClass:"line-number"},[e._v("33")]),s("br"),s("span",{staticClass:"line-number"},[e._v("34")]),s("br"),s("span",{staticClass:"line-number"},[e._v("35")]),s("br"),s("span",{staticClass:"line-number"},[e._v("36")]),s("br"),s("span",{staticClass:"line-number"},[e._v("37")]),s("br"),s("span",{staticClass:"line-number"},[e._v("38")]),s("br"),s("span",{staticClass:"line-number"},[e._v("39")]),s("br"),s("span",{staticClass:"line-number"},[e._v("40")]),s("br"),s("span",{staticClass:"line-number"},[e._v("41")]),s("br"),s("span",{staticClass:"line-number"},[e._v("42")]),s("br"),s("span",{staticClass:"line-number"},[e._v("43")]),s("br"),s("span",{staticClass:"line-number"},[e._v("44")]),s("br"),s("span",{staticClass:"line-number"},[e._v("45")]),s("br"),s("span",{staticClass:"line-number"},[e._v("46")]),s("br"),s("span",{staticClass:"line-number"},[e._v("47")]),s("br"),s("span",{staticClass:"line-number"},[e._v("48")]),s("br"),s("span",{staticClass:"line-number"},[e._v("49")]),s("br"),s("span",{staticClass:"line-number"},[e._v("50")]),s("br"),s("span",{staticClass:"line-number"},[e._v("51")]),s("br"),s("span",{staticClass:"line-number"},[e._v("52")]),s("br"),s("span",{staticClass:"line-number"},[e._v("53")]),s("br"),s("span",{staticClass:"line-number"},[e._v("54")]),s("br"),s("span",{staticClass:"line-number"},[e._v("55")]),s("br"),s("span",{staticClass:"line-number"},[e._v("56")]),s("br"),s("span",{staticClass:"line-number"},[e._v("57")]),s("br"),s("span",{staticClass:"line-number"},[e._v("58")]),s("br"),s("span",{staticClass:"line-number"},[e._v("59")]),s("br"),s("span",{staticClass:"line-number"},[e._v("60")]),s("br"),s("span",{staticClass:"line-number"},[e._v("61")]),s("br"),s("span",{staticClass:"line-number"},[e._v("62")]),s("br"),s("span",{staticClass:"line-number"},[e._v("63")]),s("br"),s("span",{staticClass:"line-number"},[e._v("64")]),s("br"),s("span",{staticClass:"line-number"},[e._v("65")]),s("br"),s("span",{staticClass:"line-number"},[e._v("66")]),s("br"),s("span",{staticClass:"line-number"},[e._v("67")]),s("br"),s("span",{staticClass:"line-number"},[e._v("68")]),s("br"),s("span",{staticClass:"line-number"},[e._v("69")]),s("br"),s("span",{staticClass:"line-number"},[e._v("70")]),s("br"),s("span",{staticClass:"line-number"},[e._v("71")]),s("br"),s("span",{staticClass:"line-number"},[e._v("72")]),s("br"),s("span",{staticClass:"line-number"},[e._v("73")]),s("br"),s("span",{staticClass:"line-number"},[e._v("74")]),s("br"),s("span",{staticClass:"line-number"},[e._v("75")]),s("br"),s("span",{staticClass:"line-number"},[e._v("76")]),s("br"),s("span",{staticClass:"line-number"},[e._v("77")]),s("br"),s("span",{staticClass:"line-number"},[e._v("78")]),s("br"),s("span",{staticClass:"line-number"},[e._v("79")]),s("br"),s("span",{staticClass:"line-number"},[e._v("80")]),s("br"),s("span",{staticClass:"line-number"},[e._v("81")]),s("br"),s("span",{staticClass:"line-number"},[e._v("82")]),s("br"),s("span",{staticClass:"line-number"},[e._v("83")]),s("br"),s("span",{staticClass:"line-number"},[e._v("84")]),s("br"),s("span",{staticClass:"line-number"},[e._v("85")]),s("br"),s("span",{staticClass:"line-number"},[e._v("86")]),s("br"),s("span",{staticClass:"line-number"},[e._v("87")]),s("br"),s("span",{staticClass:"line-number"},[e._v("88")]),s("br"),s("span",{staticClass:"line-number"},[e._v("89")]),s("br"),s("span",{staticClass:"line-number"},[e._v("90")]),s("br"),s("span",{staticClass:"line-number"},[e._v("91")]),s("br"),s("span",{staticClass:"line-number"},[e._v("92")]),s("br"),s("span",{staticClass:"line-number"},[e._v("93")]),s("br"),s("span",{staticClass:"line-number"},[e._v("94")]),s("br"),s("span",{staticClass:"line-number"},[e._v("95")]),s("br"),s("span",{staticClass:"line-number"},[e._v("96")]),s("br"),s("span",{staticClass:"line-number"},[e._v("97")]),s("br"),s("span",{staticClass:"line-number"},[e._v("98")]),s("br"),s("span",{staticClass:"line-number"},[e._v("99")]),s("br"),s("span",{staticClass:"line-number"},[e._v("100")]),s("br"),s("span",{staticClass:"line-number"},[e._v("101")]),s("br"),s("span",{staticClass:"line-number"},[e._v("102")]),s("br"),s("span",{staticClass:"line-number"},[e._v("103")]),s("br"),s("span",{staticClass:"line-number"},[e._v("104")]),s("br"),s("span",{staticClass:"line-number"},[e._v("105")]),s("br"),s("span",{staticClass:"line-number"},[e._v("106")]),s("br"),s("span",{staticClass:"line-number"},[e._v("107")]),s("br"),s("span",{staticClass:"line-number"},[e._v("108")]),s("br"),s("span",{staticClass:"line-number"},[e._v("109")]),s("br"),s("span",{staticClass:"line-number"},[e._v("110")]),s("br"),s("span",{staticClass:"line-number"},[e._v("111")]),s("br"),s("span",{staticClass:"line-number"},[e._v("112")]),s("br"),s("span",{staticClass:"line-number"},[e._v("113")]),s("br"),s("span",{staticClass:"line-number"},[e._v("114")]),s("br"),s("span",{staticClass:"line-number"},[e._v("115")]),s("br"),s("span",{staticClass:"line-number"},[e._v("116")]),s("br"),s("span",{staticClass:"line-number"},[e._v("117")]),s("br"),s("span",{staticClass:"line-number"},[e._v("118")]),s("br"),s("span",{staticClass:"line-number"},[e._v("119")]),s("br"),s("span",{staticClass:"line-number"},[e._v("120")]),s("br"),s("span",{staticClass:"line-number"},[e._v("121")]),s("br"),s("span",{staticClass:"line-number"},[e._v("122")]),s("br"),s("span",{staticClass:"line-number"},[e._v("123")]),s("br"),s("span",{staticClass:"line-number"},[e._v("124")]),s("br"),s("span",{staticClass:"line-number"},[e._v("125")]),s("br"),s("span",{staticClass:"line-number"},[e._v("126")]),s("br"),s("span",{staticClass:"line-number"},[e._v("127")]),s("br"),s("span",{staticClass:"line-number"},[e._v("128")]),s("br"),s("span",{staticClass:"line-number"},[e._v("129")]),s("br"),s("span",{staticClass:"line-number"},[e._v("130")]),s("br"),s("span",{staticClass:"line-number"},[e._v("131")]),s("br"),s("span",{staticClass:"line-number"},[e._v("132")]),s("br"),s("span",{staticClass:"line-number"},[e._v("133")]),s("br"),s("span",{staticClass:"line-number"},[e._v("134")]),s("br"),s("span",{staticClass:"line-number"},[e._v("135")]),s("br"),s("span",{staticClass:"line-number"},[e._v("136")]),s("br"),s("span",{staticClass:"line-number"},[e._v("137")]),s("br"),s("span",{staticClass:"line-number"},[e._v("138")]),s("br"),s("span",{staticClass:"line-number"},[e._v("139")]),s("br"),s("span",{staticClass:"line-number"},[e._v("140")]),s("br"),s("span",{staticClass:"line-number"},[e._v("141")]),s("br"),s("span",{staticClass:"line-number"},[e._v("142")]),s("br"),s("span",{staticClass:"line-number"},[e._v("143")]),s("br"),s("span",{staticClass:"line-number"},[e._v("144")]),s("br"),s("span",{staticClass:"line-number"},[e._v("145")]),s("br"),s("span",{staticClass:"line-number"},[e._v("146")]),s("br"),s("span",{staticClass:"line-number"},[e._v("147")]),s("br"),s("span",{staticClass:"line-number"},[e._v("148")]),s("br"),s("span",{staticClass:"line-number"},[e._v("149")]),s("br"),s("span",{staticClass:"line-number"},[e._v("150")]),s("br"),s("span",{staticClass:"line-number"},[e._v("151")]),s("br"),s("span",{staticClass:"line-number"},[e._v("152")]),s("br"),s("span",{staticClass:"line-number"},[e._v("153")]),s("br"),s("span",{staticClass:"line-number"},[e._v("154")]),s("br"),s("span",{staticClass:"line-number"},[e._v("155")]),s("br"),s("span",{staticClass:"line-number"},[e._v("156")]),s("br"),s("span",{staticClass:"line-number"},[e._v("157")]),s("br"),s("span",{staticClass:"line-number"},[e._v("158")]),s("br"),s("span",{staticClass:"line-number"},[e._v("159")]),s("br"),s("span",{staticClass:"line-number"},[e._v("160")]),s("br"),s("span",{staticClass:"line-number"},[e._v("161")]),s("br"),s("span",{staticClass:"line-number"},[e._v("162")]),s("br"),s("span",{staticClass:"line-number"},[e._v("163")]),s("br"),s("span",{staticClass:"line-number"},[e._v("164")]),s("br"),s("span",{staticClass:"line-number"},[e._v("165")]),s("br"),s("span",{staticClass:"line-number"},[e._v("166")]),s("br")])]),s("h2",{attrs:{id:"docker-runner执行器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker-runner执行器"}},[e._v("#")]),e._v(" Docker runner执行器")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("ZeyangdeMacBook-Pro:~ zeyang$ gitlab-runner register\nRuntime platform                                    arch=amd64 os=darwin pid=92353 revision=ac8e767a version=12.6.0\nWARNING: Running in user-mode.\nWARNING: Use sudo for system-mode:\nWARNING: $ sudo gitlab-runner...\n\nPlease enter the gitlab-ci coordinator URL (e.g. https://gitlab.com/):\nhttp://gitlab.devops.com/\nPlease enter the gitlab-ci token for this runner:\nRjAoLah8Vp7JCGyNzZwf\nPlease enter the gitlab-ci description for this runner:\n[ZeyangdeMacBook-Pro.local]: test\nPlease enter the gitlab-ci tags for this runner (comma separated):\ndocker\nRegistering runner... succeeded                     runner=RjAoLah8\nPlease enter the executor: virtualbox, docker-ssh, parallels, shell, ssh, kubernetes, custom, docker, docker+machine, docker-ssh+machine:\ndocker\nPlease enter the default Docker image (e.g. ruby:2.6):\nmaven:3.6.3-jdk-8\nRunner registered successfully. Feel free to start it, but if it's running already the config should be automatically reloaded!\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);