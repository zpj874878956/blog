(window.webpackJsonp=window.webpackJsonp||[]).push([[272],{625:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ç”¨fastdfsä¸€æ­¥æ­¥æ­å»ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ç”¨fastdfsä¸€æ­¥æ­¥æ­å»ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿ"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ç”¨FastDFSä¸€æ­¥æ­¥æ­å»ºæ–‡ä»¶ç®¡ç†ç³»ç»Ÿ"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("strong",[s._v("ç›®å½•")])]),s._v(" "),a("ul",[a("li",[s._v("ä¸€ã€FastDFSä»‹ç»\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label0_0",target:"_blank",rel:"noopener noreferrer"}},[s._v("1ã€ç®€ä»‹"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label0_1",target:"_blank",rel:"noopener noreferrer"}},[s._v("2ã€FastDFSçš„å­˜å‚¨ç­–ç•¥"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label0_2",target:"_blank",rel:"noopener noreferrer"}},[s._v("3ã€FastDFSçš„ä¸Šä¼ è¿‡ç¨‹"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label0_3",target:"_blank",rel:"noopener noreferrer"}},[s._v("4ã€FastDFSçš„æ–‡ä»¶åŒæ­¥"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label0_4",target:"_blank",rel:"noopener noreferrer"}},[s._v("5ã€FastDFSçš„æ–‡ä»¶ä¸‹è½½"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("äºŒã€å®‰è£…FastDFSç¯å¢ƒ\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_0",target:"_blank",rel:"noopener noreferrer"}},[s._v("0ã€å‰è¨€"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_1",target:"_blank",rel:"noopener noreferrer"}},[s._v("1ã€ä¸‹è½½å®‰è£… libfastcommon"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_2",target:"_blank",rel:"noopener noreferrer"}},[s._v("2ã€ä¸‹è½½å®‰è£…FastDFS"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_3",target:"_blank",rel:"noopener noreferrer"}},[s._v("3ã€é…ç½®FastDFSè·Ÿè¸ªå™¨(Tracker)"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_4",target:"_blank",rel:"noopener noreferrer"}},[s._v("4ã€é…ç½® FastDFS å­˜å‚¨ (Storage)"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label1_5",target:"_blank",rel:"noopener noreferrer"}},[s._v("5ã€æ–‡ä»¶ä¸Šä¼ æµ‹è¯•"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("ä¸‰ã€å®‰è£…Nginx\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label2_0",target:"_blank",rel:"noopener noreferrer"}},[s._v("1ã€å®‰è£…nginxæ‰€éœ€ç¯å¢ƒã€€ã€€"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label2_1",target:"_blank",rel:"noopener noreferrer"}},[s._v("2ã€å®‰è£…Nginx"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label2_2",target:"_blank",rel:"noopener noreferrer"}},[s._v("3ã€è®¿é—®æ–‡ä»¶"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("å››ã€FastDFS é…ç½® Nginx æ¨¡å—\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label3_0",target:"_blank",rel:"noopener noreferrer"}},[s._v("1ã€å®‰è£…é…ç½®Nginxæ¨¡å—"),a("OutboundLink")],1)])])]),s._v(" "),a("li",[s._v("äº”ã€Javaå®¢æˆ·ç«¯\n"),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label4_0",target:"_blank",rel:"noopener noreferrer"}},[s._v("1ã€é¦–å…ˆéœ€è¦æ­å»º FastDFS å®¢æˆ·ç«¯Javaå¼€å‘ç¯å¢ƒ"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label4_1",target:"_blank",rel:"noopener noreferrer"}},[s._v("2ã€å®¢æˆ·ç«¯API"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_label4_2",target:"_blank",rel:"noopener noreferrer"}},[s._v("å…­ã€æƒé™æ§åˆ¶"),a("OutboundLink")],1)])])])]),s._v(" "),a("hr"),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_labelTop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å›åˆ°é¡¶éƒ¨"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"ä¸€ã€fastdfsä»‹ç»"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸€ã€fastdfsä»‹ç»"}},[s._v("#")]),s._v(" ä¸€ã€FastDFSä»‹ç»")]),s._v(" "),a("p",[s._v("FastDFSå¼€æºåœ°å€ï¼šhttps://github.com/happyfish100")]),s._v(" "),a("p",[s._v("å‚è€ƒï¼š"),a("a",{attrs:{href:"http://blog.chinaunix.net/uid-20196318-id-4058561.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»ŸFastDFSè®¾è®¡åŸç†"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("å‚è€ƒï¼š"),a("a",{attrs:{href:"http://www.cnblogs.com/Leo_wl/p/6731647.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("FastDFSåˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿ"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("ä¸ªäººå°è£…çš„FastDFS Java APIï¼šhttps://github.com/bojiangzhou/lyyzoo-fastdfs-java")]),s._v(" "),a("h3",{attrs:{id:"_1ã€ç®€ä»‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ç®€ä»‹"}},[s._v("#")]),s._v(" 1ã€ç®€ä»‹")]),s._v(" "),a("p",[s._v("FastDFS æ˜¯ä¸€ä¸ªå¼€æºçš„é«˜æ€§èƒ½åˆ†å¸ƒå¼æ–‡ä»¶ç³»ç»Ÿï¼ˆDFSï¼‰ã€‚ å®ƒçš„ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ï¼šæ–‡ä»¶å­˜å‚¨ï¼Œæ–‡ä»¶åŒæ­¥å’Œæ–‡ä»¶è®¿é—®ï¼Œä»¥åŠé«˜å®¹é‡å’Œè´Ÿè½½å¹³è¡¡ã€‚ä¸»è¦è§£å†³äº†æµ·é‡æ•°æ®å­˜å‚¨é—®é¢˜ï¼Œç‰¹åˆ«é€‚åˆä»¥ä¸­å°æ–‡ä»¶ï¼ˆå»ºè®®èŒƒå›´ï¼š4KB < file_size <500MBï¼‰ä¸ºè½½ä½“çš„åœ¨çº¿æœåŠ¡ã€‚")]),s._v(" "),a("p",[s._v("FastDFS ç³»ç»Ÿæœ‰ä¸‰ä¸ªè§’è‰²ï¼šè·Ÿè¸ªæœåŠ¡å™¨(Tracker Server)ã€å­˜å‚¨æœåŠ¡å™¨(Storage Server)å’Œå®¢æˆ·ç«¯(Client)ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("Tracker Server")]),s._v("ï¼šè·Ÿè¸ªæœåŠ¡å™¨ï¼Œä¸»è¦åšè°ƒåº¦å·¥ä½œï¼Œèµ·åˆ°å‡è¡¡çš„ä½œç”¨ï¼›è´Ÿè´£ç®¡ç†æ‰€æœ‰çš„ storage serverå’Œ groupï¼Œæ¯ä¸ª storage åœ¨å¯åŠ¨åä¼šè¿æ¥ Trackerï¼Œå‘ŠçŸ¥è‡ªå·±æ‰€å± group ç­‰ä¿¡æ¯ï¼Œå¹¶ä¿æŒå‘¨æœŸæ€§å¿ƒè·³ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("Storage Server")]),s._v("ï¼šå­˜å‚¨æœåŠ¡å™¨ï¼Œä¸»è¦æä¾›å®¹é‡å’Œå¤‡ä»½æœåŠ¡ï¼›ä»¥ group ä¸ºå•ä½ï¼Œæ¯ä¸ª group å†…å¯ä»¥æœ‰å¤šå° storage serverï¼Œæ•°æ®äº’ä¸ºå¤‡ä»½ã€‚")]),s._v(" "),a("p",[a("strong",[s._v("Client")]),s._v("ï¼šå®¢æˆ·ç«¯ï¼Œä¸Šä¼ ä¸‹è½½æ•°æ®çš„æœåŠ¡å™¨ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬è‡ªå·±çš„é¡¹ç›®æ‰€éƒ¨ç½²åœ¨çš„æœåŠ¡å™¨ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011144153840-1185141903.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_2ã€fastdfsçš„å­˜å‚¨ç­–ç•¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€fastdfsçš„å­˜å‚¨ç­–ç•¥"}},[s._v("#")]),s._v(" "),a("strong",[s._v("2ã€FastDFSçš„å­˜å‚¨ç­–ç•¥")])]),s._v(" "),a("p",[s._v("ä¸ºäº†æ”¯æŒå¤§å®¹é‡ï¼Œå­˜å‚¨èŠ‚ç‚¹ï¼ˆæœåŠ¡å™¨ï¼‰é‡‡ç”¨äº†åˆ†å·ï¼ˆæˆ–åˆ†ç»„ï¼‰çš„ç»„ç»‡æ–¹å¼ã€‚å­˜å‚¨ç³»ç»Ÿç”±ä¸€ä¸ªæˆ–å¤šä¸ªå·ç»„æˆï¼Œå·ä¸å·ä¹‹é—´çš„æ–‡ä»¶æ˜¯ç›¸äº’ç‹¬ç«‹çš„ï¼Œæ‰€æœ‰å·çš„æ–‡ä»¶å®¹é‡ç´¯åŠ å°±æ˜¯æ•´ä¸ªå­˜å‚¨ç³»ç»Ÿä¸­çš„æ–‡ä»¶å®¹é‡ã€‚ä¸€ä¸ªå·å¯ä»¥ç”±ä¸€å°æˆ–å¤šå°å­˜å‚¨æœåŠ¡å™¨ç»„æˆï¼Œä¸€ä¸ªå·ä¸‹çš„å­˜å‚¨æœåŠ¡å™¨ä¸­çš„æ–‡ä»¶éƒ½æ˜¯ç›¸åŒçš„ï¼Œå·ä¸­çš„å¤šå°å­˜å‚¨æœåŠ¡å™¨èµ·åˆ°äº†å†—ä½™å¤‡ä»½å’Œè´Ÿè½½å‡è¡¡çš„ä½œç”¨ã€‚")]),s._v(" "),a("p",[s._v("åœ¨å·ä¸­å¢åŠ æœåŠ¡å™¨æ—¶ï¼ŒåŒæ­¥å·²æœ‰çš„æ–‡ä»¶ç”±ç³»ç»Ÿè‡ªåŠ¨å®Œæˆï¼ŒåŒæ­¥å®Œæˆåï¼Œç³»ç»Ÿè‡ªåŠ¨å°†æ–°å¢æœåŠ¡å™¨åˆ‡æ¢åˆ°çº¿ä¸Šæä¾›æœåŠ¡ã€‚å½“å­˜å‚¨ç©ºé—´ä¸è¶³æˆ–å³å°†è€—å°½æ—¶ï¼Œå¯ä»¥åŠ¨æ€æ·»åŠ å·ã€‚åªéœ€è¦å¢åŠ ä¸€å°æˆ–å¤šå°æœåŠ¡å™¨ï¼Œå¹¶å°†å®ƒä»¬é…ç½®ä¸ºä¸€ä¸ªæ–°çš„å·ï¼Œè¿™æ ·å°±æ‰©å¤§äº†å­˜å‚¨ç³»ç»Ÿçš„å®¹é‡ã€‚")]),s._v(" "),a("h3",{attrs:{id:"_3ã€fastdfsçš„ä¸Šä¼ è¿‡ç¨‹"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€fastdfsçš„ä¸Šä¼ è¿‡ç¨‹"}},[s._v("#")]),s._v(" "),a("strong",[s._v("3ã€FastDFSçš„ä¸Šä¼ è¿‡ç¨‹")])]),s._v(" "),a("p",[s._v("FastDFSå‘ä½¿ç”¨è€…æä¾›åŸºæœ¬æ–‡ä»¶è®¿é—®æ¥å£ï¼Œæ¯”å¦‚uploadã€downloadã€appendã€deleteç­‰ï¼Œä»¥å®¢æˆ·ç«¯åº“çš„æ–¹å¼æä¾›ç»™ç”¨æˆ·ä½¿ç”¨ã€‚")]),s._v(" "),a("p",[s._v("Storage Serverä¼šå®šæœŸçš„å‘Tracker Serverå‘é€è‡ªå·±çš„å­˜å‚¨ä¿¡æ¯ã€‚å½“Tracker Server Clusterä¸­çš„Tracker Serverä¸æ­¢ä¸€ä¸ªæ—¶ï¼Œå„ä¸ªTrackerä¹‹é—´çš„å…³ç³»æ˜¯å¯¹ç­‰çš„ï¼Œæ‰€ä»¥å®¢æˆ·ç«¯ä¸Šä¼ æ—¶å¯ä»¥é€‰æ‹©ä»»æ„ä¸€ä¸ªTrackerã€‚")]),s._v(" "),a("p",[s._v("å½“Trackeræ”¶åˆ°å®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶çš„è¯·æ±‚æ—¶ï¼Œä¼šä¸ºè¯¥æ–‡ä»¶åˆ†é…ä¸€ä¸ªå¯ä»¥å­˜å‚¨æ–‡ä»¶çš„groupï¼Œå½“é€‰å®šäº†groupåå°±è¦å†³å®šç»™å®¢æˆ·ç«¯åˆ†é…groupä¸­çš„å“ªä¸€ä¸ªstorage serverã€‚å½“åˆ†é…å¥½storage serveråï¼Œå®¢æˆ·ç«¯å‘storageå‘é€å†™æ–‡ä»¶è¯·æ±‚ï¼Œstorageå°†ä¼šä¸ºæ–‡ä»¶åˆ†é…ä¸€ä¸ªæ•°æ®å­˜å‚¨ç›®å½•ã€‚ç„¶åä¸ºæ–‡ä»¶åˆ†é…ä¸€ä¸ªfileidï¼Œæœ€åæ ¹æ®ä»¥ä¸Šçš„ä¿¡æ¯ç”Ÿæˆæ–‡ä»¶åå­˜å‚¨æ–‡ä»¶ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171012121639387-1574147926.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_4ã€fastdfsçš„æ–‡ä»¶åŒæ­¥"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€fastdfsçš„æ–‡ä»¶åŒæ­¥"}},[s._v("#")]),s._v(" "),a("strong",[s._v("4ã€FastDFSçš„æ–‡ä»¶åŒæ­¥")])]),s._v(" "),a("p",[s._v("å†™æ–‡ä»¶æ—¶ï¼Œå®¢æˆ·ç«¯å°†æ–‡ä»¶å†™è‡³groupå†…ä¸€ä¸ªstorage serverå³è®¤ä¸ºå†™æ–‡ä»¶æˆåŠŸï¼Œstorage serverå†™å®Œæ–‡ä»¶åï¼Œä¼šç”±åå°çº¿ç¨‹å°†æ–‡ä»¶åŒæ­¥è‡³åŒgroupå†…å…¶ä»–çš„storage serverã€‚")]),s._v(" "),a("p",[s._v("æ¯ä¸ªstorageå†™æ–‡ä»¶åï¼ŒåŒæ—¶ä¼šå†™ä¸€ä»½binlogï¼Œbinlogé‡Œä¸åŒ…å«æ–‡ä»¶æ•°æ®ï¼ŒåªåŒ…å«æ–‡ä»¶åç­‰å…ƒä¿¡æ¯ï¼Œè¿™ä»½binlogç”¨äºåå°åŒæ­¥ï¼Œstorageä¼šè®°å½•å‘groupå†…å…¶ä»–storageåŒæ­¥çš„è¿›åº¦ï¼Œä»¥ä¾¿é‡å¯åèƒ½æ¥ä¸Šæ¬¡çš„è¿›åº¦ç»§ç»­åŒæ­¥ï¼›è¿›åº¦ä»¥æ—¶é—´æˆ³çš„æ–¹å¼è¿›è¡Œè®°å½•ï¼Œæ‰€ä»¥æœ€å¥½èƒ½ä¿è¯é›†ç¾¤å†…æ‰€æœ‰serverçš„æ—¶é’Ÿä¿æŒåŒæ­¥ã€‚")]),s._v(" "),a("p",[s._v("storageçš„åŒæ­¥è¿›åº¦ä¼šä½œä¸ºå…ƒæ•°æ®çš„ä¸€éƒ¨åˆ†æ±‡æŠ¥åˆ°trackerä¸Šï¼Œtrackeåœ¨é€‰æ‹©è¯»storageçš„æ—¶å€™ä¼šä»¥åŒæ­¥è¿›åº¦ä½œä¸ºå‚è€ƒã€‚")]),s._v(" "),a("h3",{attrs:{id:"_5ã€fastdfsçš„æ–‡ä»¶ä¸‹è½½"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€fastdfsçš„æ–‡ä»¶ä¸‹è½½"}},[s._v("#")]),s._v(" "),a("strong",[s._v("5ã€FastDFSçš„æ–‡ä»¶ä¸‹è½½")])]),s._v(" "),a("p",[s._v("å®¢æˆ·ç«¯uploadfileæˆåŠŸåï¼Œä¼šæ‹¿åˆ°ä¸€ä¸ªstorageç”Ÿæˆçš„æ–‡ä»¶åï¼Œæ¥ä¸‹æ¥å®¢æˆ·ç«¯æ ¹æ®è¿™ä¸ªæ–‡ä»¶åå³å¯è®¿é—®åˆ°è¯¥æ–‡ä»¶ã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2015.cnblogs.com/blog/380252/201704/380252-20170415090611017-204910775.png",alt:"img"}})]),s._v(" "),a("p",[s._v("è·Ÿupload fileä¸€æ ·ï¼Œåœ¨downloadfileæ—¶å®¢æˆ·ç«¯å¯ä»¥é€‰æ‹©ä»»æ„tracker serverã€‚trackerå‘é€downloadè¯·æ±‚ç»™æŸä¸ªtrackerï¼Œå¿…é¡»å¸¦ä¸Šæ–‡ä»¶åä¿¡æ¯ï¼Œtrackeä»æ–‡ä»¶åä¸­è§£æå‡ºæ–‡ä»¶çš„groupã€å¤§å°ã€åˆ›å»ºæ—¶é—´ç­‰ä¿¡æ¯ï¼Œç„¶åä¸ºè¯¥è¯·æ±‚é€‰æ‹©ä¸€ä¸ªstorageç”¨æ¥æœåŠ¡è¯»è¯·æ±‚ã€‚")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_labelTop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å›åˆ°é¡¶éƒ¨"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"äºŒã€å®‰è£…fastdfsç¯å¢ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äºŒã€å®‰è£…fastdfsç¯å¢ƒ"}},[s._v("#")]),s._v(" äºŒã€å®‰è£…FastDFSç¯å¢ƒ")]),s._v(" "),a("h3",{attrs:{id:"_0ã€å‰è¨€"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_0ã€å‰è¨€"}},[s._v("#")]),s._v(" 0ã€å‰è¨€")]),s._v(" "),a("p",[s._v("æ“ä½œç¯å¢ƒï¼šCentOS7 X64ï¼Œä»¥ä¸‹æ“ä½œéƒ½æ˜¯å•æœºç¯å¢ƒã€‚")]),s._v(" "),a("p",[s._v("æˆ‘æŠŠæ‰€æœ‰çš„å®‰è£…åŒ…ä¸‹è½½åˆ°/softpackages/ä¸‹ï¼Œè§£å‹åˆ°å½“å‰ç›®å½•ã€‚")]),s._v(" "),a("p",[s._v("å…ˆåšä¸€ä»¶äº‹ï¼Œä¿®æ”¹hostsï¼Œå°†æ–‡ä»¶æœåŠ¡å™¨çš„ipä¸åŸŸåæ˜ å°„(å•æœºTrackerServerç¯å¢ƒ)ï¼Œå› ä¸ºåé¢å¾ˆå¤šé…ç½®é‡Œé¢éƒ½éœ€è¦å»é…ç½®æœåŠ¡å™¨åœ°å€ï¼Œipå˜äº†ï¼Œå°±åªéœ€è¦ä¿®æ”¹hostså³å¯ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /etc/hosts\n\nå¢åŠ å¦‚ä¸‹ä¸€è¡Œï¼Œè¿™æ˜¯æˆ‘çš„IP\n192.168.51.128 file.ljzsg.com\n\nå¦‚æœè¦æœ¬æœºè®¿é—®è™šæ‹Ÿæœºï¼Œåœ¨C:\\Windows\\System32\\drivers\\etc\\hostsä¸­åŒæ ·å¢åŠ ä¸€è¡Œ\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_1ã€ä¸‹è½½å®‰è£…-libfastcommon"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€ä¸‹è½½å®‰è£…-libfastcommon"}},[s._v("#")]),s._v(" 1ã€ä¸‹è½½å®‰è£… libfastcommon")]),s._v(" "),a("p",[s._v("libfastcommonæ˜¯ä» FastDFS å’Œ FastDHT ä¸­æå–å‡ºæ¥çš„å…¬å…± C å‡½æ•°åº“ï¼ŒåŸºç¡€ç¯å¢ƒï¼Œå®‰è£…å³å¯ ã€‚")]),s._v(" "),a("p",[s._v("â‘  ä¸‹è½½libfastcommon")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# wget https://github.com/happyfish100/libfastcommon/archive/V1.0.7.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¡ è§£å‹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# tar -zxvf V1.0.7.tar.gz\n# cd libfastcommon-1.0.7\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘¢ ç¼–è¯‘ã€å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ./make.sh\n# ./make.sh install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘£ libfastcommon.so å®‰è£…åˆ°äº†/usr/lib64/libfastcommon.soï¼Œä½†æ˜¯FastDFSä¸»ç¨‹åºè®¾ç½®çš„libç›®å½•æ˜¯/usr/local/libï¼Œæ‰€ä»¥éœ€è¦åˆ›å»ºè½¯é“¾æ¥ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ln -s /usr/lib64/libfastcommon.so /usr/local/lib/libfastcommon.so\n# ln -s /usr/lib64/libfastcommon.so /usr/lib/libfastcommon.so\n# ln -s /usr/lib64/libfdfsclient.so /usr/local/lib/libfdfsclient.so\n# ln -s /usr/lib64/libfdfsclient.so /usr/lib/libfdfsclient.so \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_2ã€ä¸‹è½½å®‰è£…fastdfs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€ä¸‹è½½å®‰è£…fastdfs"}},[s._v("#")]),s._v(" 2ã€ä¸‹è½½å®‰è£…FastDFS")]),s._v(" "),a("p",[s._v("â‘  ä¸‹è½½FastDFS")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# wget https://github.com/happyfish100/fastdfs/archive/V5.05.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¡ è§£å‹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# tar -zxvf V5.05.tar.gz\n# cd fastdfs-5.05\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘¢ ç¼–è¯‘ã€å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ./make.sh\n# ./make.sh install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘£ é»˜è®¤å®‰è£…æ–¹å¼å®‰è£…åçš„ç›¸åº”æ–‡ä»¶ä¸ç›®å½•\nã€€ã€€Aã€æœåŠ¡è„šæœ¬ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/etc/init.d/fdfs_storaged\n/etc/init.d/fdfs_tracker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("Bã€é…ç½®æ–‡ä»¶ï¼ˆè¿™ä¸‰ä¸ªæ˜¯ä½œè€…ç»™çš„æ ·ä¾‹é…ç½®æ–‡ä»¶ï¼‰ :")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/etc/fdfs/client.conf.sample\n/etc/fdfs/storage.conf.sample\n/etc/fdfs/tracker.conf.sample\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("Cã€å‘½ä»¤å·¥å…·åœ¨ /usr/bin/ ç›®å½•ä¸‹ï¼š")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("fdfs_appender_test\nfdfs_appender_test1\nfdfs_append_file\nfdfs_crc32\nfdfs_delete_file\nfdfs_download_file\nfdfs_file_info\nfdfs_monitor\nfdfs_storaged\nfdfs_test\nfdfs_test1\nfdfs_trackerd\nfdfs_upload_appender\nfdfs_upload_file\nstop.sh\nrestart.sh \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¤ FastDFS æœåŠ¡è„šæœ¬è®¾ç½®çš„ bin ç›®å½•æ˜¯ /usr/local/binï¼Œ ä½†å®é™…å‘½ä»¤å®‰è£…åœ¨ /usr/bin/ ä¸‹ã€‚")]),s._v(" "),a("p",[s._v("ä¸¤ç§æ–¹å¼ï¼š")]),s._v(" "),a("p",[s._v("ã€‹ ä¸€æ˜¯ä¿®æ”¹FastDFS æœåŠ¡è„šæœ¬ä¸­ç›¸åº”çš„å‘½ä»¤è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯æŠŠ /etc/init.d/fdfs_storaged å’Œ /etc/init.d/fdfs_tracker ä¸¤ä¸ªè„šæœ¬ä¸­çš„ /usr/local/bin ä¿®æ”¹æˆ /usr/binã€‚")]),s._v(" "),a("p",[s._v("# vim fdfs_trackerd\nã€€ã€€ã€€ã€€ä½¿ç”¨æŸ¥æ‰¾æ›¿æ¢å‘½ä»¤è¿›ç»Ÿä¸€ä¿®æ”¹:%s+/usr/local/bin+/usr/bin\nã€€ã€€ã€€ã€€# vim fdfs_storaged\nã€€ã€€ã€€ã€€ä½¿ç”¨æŸ¥æ‰¾æ›¿æ¢å‘½ä»¤è¿›ç»Ÿä¸€ä¿®æ”¹:%s+/usr/local/bin+/usr/bin")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011104718043-576731412.png",alt:"img"}})]),s._v(" "),a("p",[s._v("ã€‹ äºŒæ˜¯å»ºç«‹ /usr/bin åˆ° /usr/local/bin çš„è½¯é“¾æ¥ï¼Œæˆ‘æ˜¯ç”¨è¿™ç§æ–¹å¼ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ln -s /usr/bin/fdfs_trackerd   /usr/local/bin\n# ln -s /usr/bin/fdfs_storaged   /usr/local/bin\n# ln -s /usr/bin/stop.sh         /usr/local/bin\n# ln -s /usr/bin/restart.sh      /usr/local/bin\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"_3ã€é…ç½®fastdfsè·Ÿè¸ªå™¨-tracker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€é…ç½®fastdfsè·Ÿè¸ªå™¨-tracker"}},[s._v("#")]),s._v(" 3ã€é…ç½®FastDFSè·Ÿè¸ªå™¨(Tracker)")]),s._v(" "),a("p",[s._v("é…ç½®æ–‡ä»¶è¯¦ç»†è¯´æ˜å‚è€ƒï¼š"),a("a",{attrs:{href:"http://bbs.chinaunix.net/forum.php?mod=viewthread&tid=1941456&extra=page%3D1%26filter%3Ddigest%26digest%3D1",target:"_blank",rel:"noopener noreferrer"}},[s._v("FastDFS é…ç½®æ–‡ä»¶è¯¦è§£"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("â‘  è¿›å…¥ /etc/fdfsï¼Œå¤åˆ¶ FastDFS è·Ÿè¸ªå™¨æ ·ä¾‹é…ç½®æ–‡ä»¶ tracker.conf.sampleï¼Œå¹¶é‡å‘½åä¸º tracker.confã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /etc/fdfs\n# cp tracker.conf.sample tracker.conf\n# vim tracker.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("â‘¡ ç¼–è¾‘tracker.conf ï¼Œæ ‡çº¢çš„éœ€è¦ä¿®æ”¹ä¸‹ï¼Œå…¶å®ƒçš„é»˜è®¤å³å¯ã€‚")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# é…ç½®æ–‡ä»¶æ˜¯å¦ä¸ç”Ÿæ•ˆï¼Œfalse ä¸ºç”Ÿæ•ˆ\ndisabled=false\n# æä¾›æœåŠ¡çš„ç«¯å£\nport=22122\n# Tracker æ•°æ®å’Œæ—¥å¿—ç›®å½•åœ°å€(æ ¹ç›®å½•å¿…é¡»å­˜åœ¨,å­ç›®å½•ä¼šè‡ªåŠ¨åˆ›å»º)\nbase_path=/ljzsg/fastdfs/tracker\n# HTTP æœåŠ¡ç«¯å£\nhttp.server_port=80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¢ åˆ›å»ºtrackeråŸºç¡€æ•°æ®ç›®å½•ï¼Œå³base_pathå¯¹åº”çš„ç›®å½•")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# mkdir -p /ljzsg/fastdfs/tracker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘£ é˜²ç«å¢™ä¸­æ‰“å¼€è·Ÿè¸ªç«¯å£ï¼ˆé»˜è®¤çš„22122ï¼‰")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /etc/sysconfig/iptables\næ·»åŠ å¦‚ä¸‹ç«¯å£è¡Œï¼š\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 22122 -j ACCEPT\né‡å¯é˜²ç«å¢™ï¼š\n# service iptables restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¤ å¯åŠ¨Tracker")]),s._v(" "),a("p",[s._v("åˆæ¬¡æˆåŠŸå¯åŠ¨ï¼Œä¼šåœ¨ /ljzsg/fdfsdfs/tracker/ (é…ç½®çš„base_path)ä¸‹åˆ›å»º dataã€logs ä¸¤ä¸ªç›®å½•ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("å¯ä»¥ç”¨è¿™ç§æ–¹å¼å¯åŠ¨\n# /etc/init.d/fdfs_trackerd start\n\nä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹å¼å¯åŠ¨ï¼Œå‰ææ˜¯ä¸Šé¢åˆ›å»ºäº†è½¯é“¾æ¥ï¼Œåé¢éƒ½ç”¨è¿™ç§æ–¹å¼\n# service fdfs_trackerd start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("æŸ¥çœ‹ FastDFS Tracker æ˜¯å¦å·²æˆåŠŸå¯åŠ¨ ï¼Œ22122ç«¯å£æ­£åœ¨è¢«ç›‘å¬ï¼Œåˆ™ç®—æ˜¯TrackeræœåŠ¡å®‰è£…æˆåŠŸã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# netstat -unltp|grep fdfs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011121344184-1089101646.png",alt:"img"}})]),s._v(" "),a("p",[s._v("å…³é—­Trackerå‘½ä»¤ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# service fdfs_trackerd stop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¥ è®¾ç½®Trackerå¼€æœºå¯åŠ¨")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# chkconfig fdfs_trackerd on\n\næˆ–è€…ï¼š\n# vim /etc/rc.d/rc.local\nåŠ å…¥é…ç½®ï¼š\n/etc/init.d/fdfs_trackerd start \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("â‘¦ tracker server ç›®å½•åŠæ–‡ä»¶ç»“æ„")]),s._v(" "),a("p",[s._v("TrackeræœåŠ¡å¯åŠ¨æˆåŠŸåï¼Œä¼šåœ¨base_pathä¸‹åˆ›å»ºdataã€logsä¸¤ä¸ªç›®å½•ã€‚ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("${base_path}\n  |__data\n  |   |__storage_groups.datï¼šå­˜å‚¨åˆ†ç»„ä¿¡æ¯\n  |   |__storage_servers.datï¼šå­˜å‚¨æœåŠ¡å™¨åˆ—è¡¨\n  |__logs\n  |   |__trackerd.logï¼š tracker server æ—¥å¿—æ–‡ä»¶ \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h3",{attrs:{id:"_4ã€é…ç½®-fastdfs-å­˜å‚¨-storage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4ã€é…ç½®-fastdfs-å­˜å‚¨-storage"}},[s._v("#")]),s._v(" 4ã€é…ç½® FastDFS å­˜å‚¨ (Storage)")]),s._v(" "),a("p",[s._v("â‘  è¿›å…¥ /etc/fdfs ç›®å½•ï¼Œå¤åˆ¶ FastDFS å­˜å‚¨å™¨æ ·ä¾‹é…ç½®æ–‡ä»¶ storage.conf.sampleï¼Œå¹¶é‡å‘½åä¸º storage.conf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /etc/fdfs\n# cp storage.conf.sample storage.conf# vim storage.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘¡ ç¼–è¾‘storage.conf")]),s._v(" "),a("p",[s._v("æ ‡çº¢çš„éœ€è¦ä¿®æ”¹ï¼Œå…¶å®ƒçš„é»˜è®¤å³å¯ã€‚")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# é…ç½®æ–‡ä»¶æ˜¯å¦ä¸ç”Ÿæ•ˆï¼Œfalse ä¸ºç”Ÿæ•ˆ\ndisabled=false \n\n# æŒ‡å®šæ­¤ storage server æ‰€åœ¨ ç»„(å·)\ngroup_name=group1\n\n# storage server æœåŠ¡ç«¯å£\nport=23000\n\n# å¿ƒè·³é—´éš”æ—¶é—´ï¼Œå•ä½ä¸ºç§’ (è¿™é‡Œæ˜¯æŒ‡ä¸»åŠ¨å‘ tracker server å‘é€å¿ƒè·³)\nheart_beat_interval=30\n\n# Storage æ•°æ®å’Œæ—¥å¿—ç›®å½•åœ°å€(æ ¹ç›®å½•å¿…é¡»å­˜åœ¨ï¼Œå­ç›®å½•ä¼šè‡ªåŠ¨ç”Ÿæˆ)\nbase_path=/ljzsg/fastdfs/storage\n\n# å­˜æ”¾æ–‡ä»¶æ—¶ storage server æ”¯æŒå¤šä¸ªè·¯å¾„ã€‚è¿™é‡Œé…ç½®å­˜æ”¾æ–‡ä»¶çš„åŸºè·¯å¾„æ•°ç›®ï¼Œé€šå¸¸åªé…ä¸€ä¸ªç›®å½•ã€‚\nstore_path_count=1\n\n\n# é€ä¸€é…ç½® store_path_count ä¸ªè·¯å¾„ï¼Œç´¢å¼•å·åŸºäº 0ã€‚\n# å¦‚æœä¸é…ç½® store_path0ï¼Œé‚£å®ƒå°±å’Œ base_path å¯¹åº”çš„è·¯å¾„ä¸€æ ·ã€‚\nstore_path0=/ljzsg/fastdfs/file\n\n# FastDFS å­˜å‚¨æ–‡ä»¶æ—¶ï¼Œé‡‡ç”¨äº†ä¸¤çº§ç›®å½•ã€‚è¿™é‡Œé…ç½®å­˜æ”¾æ–‡ä»¶çš„ç›®å½•ä¸ªæ•°ã€‚ \n# å¦‚æœæœ¬å‚æ•°åªä¸º Nï¼ˆå¦‚ï¼š 256ï¼‰ï¼Œé‚£ä¹ˆ storage server åœ¨åˆæ¬¡è¿è¡Œæ—¶ï¼Œä¼šåœ¨ store_path ä¸‹è‡ªåŠ¨åˆ›å»º N * N ä¸ªå­˜æ”¾æ–‡ä»¶çš„å­ç›®å½•ã€‚\nsubdir_count_per_path=256\n\n# tracker_server çš„åˆ—è¡¨ ï¼Œä¼šä¸»åŠ¨è¿æ¥ tracker_server\n# æœ‰å¤šä¸ª tracker server æ—¶ï¼Œæ¯ä¸ª tracker server å†™ä¸€è¡Œ\ntracker_server=file.ljzsg.com:22122# å…è®¸ç³»ç»ŸåŒæ­¥çš„æ—¶é—´æ®µ (é»˜è®¤æ˜¯å…¨å¤©) ã€‚ä¸€èˆ¬ç”¨äºé¿å…é«˜å³°åŒæ­¥äº§ç”Ÿä¸€äº›é—®é¢˜è€Œè®¾å®šã€‚sync_start_time=00:00sync_end_time=23:59\n# è®¿é—®ç«¯å£\nhttp.server_port=80\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¢ åˆ›å»ºStorageåŸºç¡€æ•°æ®ç›®å½•ï¼Œå¯¹åº”base_pathç›®å½•")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# mkdir -p /ljzsg/fastdfs/storage\n\n# è¿™æ˜¯é…ç½®çš„store_path0è·¯å¾„\n# mkdir -p /ljzsg/fastdfs/file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("â‘£ é˜²ç«å¢™ä¸­æ‰“å¼€å­˜å‚¨å™¨ç«¯å£ï¼ˆé»˜è®¤çš„ 23000ï¼‰")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /etc/sysconfig/iptables\n\næ·»åŠ å¦‚ä¸‹ç«¯å£è¡Œï¼š\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 23000 -j ACCEPT\n\né‡å¯é˜²ç«å¢™ï¼š\n# service iptables restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011133233777-1903096242.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘¤ å¯åŠ¨ Storage")]),s._v(" "),a("p",[s._v("å¯åŠ¨Storageå‰ç¡®ä¿Trackeræ˜¯å¯åŠ¨çš„ã€‚åˆæ¬¡å¯åŠ¨æˆåŠŸï¼Œä¼šåœ¨ /ljzsg/fastdfs/storage ç›®å½•ä¸‹åˆ›å»º dataã€ logs ä¸¤ä¸ªç›®å½•ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("å¯ä»¥ç”¨è¿™ç§æ–¹å¼å¯åŠ¨\n# /etc/init.d/fdfs_storaged start\n\nä¹Ÿå¯ä»¥ç”¨è¿™ç§æ–¹å¼ï¼Œåé¢éƒ½ç”¨è¿™ç§\n# service fdfs_storaged start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("æŸ¥çœ‹ Storage æ˜¯å¦æˆåŠŸå¯åŠ¨ï¼Œ23000 ç«¯å£æ­£åœ¨è¢«ç›‘å¬ï¼Œå°±ç®— Storage å¯åŠ¨æˆåŠŸã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# netstat -unltp|grep fdfs\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011134723387-604894314.png",alt:"img"}})]),s._v(" "),a("p",[s._v("å…³é—­Storageå‘½ä»¤ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# service fdfs_storaged stop\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æŸ¥çœ‹Storageå’ŒTrackeræ˜¯å¦åœ¨é€šä¿¡ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/usr/bin/fdfs_monitor /etc/fdfs/storage.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171016093815615-757608481.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘¥ è®¾ç½® Storage å¼€æœºå¯åŠ¨")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# chkconfig fdfs_storaged on\næˆ–è€…ï¼š\n# vim /etc/rc.d/rc.local\nåŠ å…¥é…ç½®ï¼š\n/etc/init.d/fdfs_storaged start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("â‘¦ Storage ç›®å½•")]),s._v(" "),a("p",[s._v("åŒ Trackerï¼ŒStorage å¯åŠ¨æˆåŠŸåï¼Œåœ¨base_path ä¸‹åˆ›å»ºäº†dataã€logsç›®å½•ï¼Œè®°å½•ç€ Storage Server çš„ä¿¡æ¯ã€‚")]),s._v(" "),a("p",[s._v("åœ¨ store_path0 ç›®å½•ä¸‹ï¼Œåˆ›å»ºäº†N*Nä¸ªå­ç›®å½•ï¼š")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011135658074-1715166829.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_5ã€æ–‡ä»¶ä¸Šä¼ æµ‹è¯•"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5ã€æ–‡ä»¶ä¸Šä¼ æµ‹è¯•"}},[s._v("#")]),s._v(" 5ã€æ–‡ä»¶ä¸Šä¼ æµ‹è¯•")]),s._v(" "),a("p",[s._v("â‘  ä¿®æ”¹ Tracker æœåŠ¡å™¨ä¸­çš„å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /etc/fdfs\n# cp client.conf.sample client.conf\n# vim client.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ä¿®æ”¹å¦‚ä¸‹é…ç½®å³å¯ï¼Œå…¶å®ƒé»˜è®¤ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# Client çš„æ•°æ®å’Œæ—¥å¿—ç›®å½•\nbase_path=/ljzsg/fastdfs/client\n\n# Trackerç«¯å£\ntracker_server=file.ljzsg.com:22122\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("â‘¡ ä¸Šä¼ æµ‹è¯•")]),s._v(" "),a("p",[s._v("åœ¨linuxå†…éƒ¨æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ä¸Šä¼  namei.jpeg å›¾ç‰‡")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# /usr/bin/fdfs_upload_file /etc/fdfs/client.conf namei.jpeg\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¸Šä¼ æˆåŠŸåè¿”å›æ–‡ä»¶IDå·ï¼šgroup1/M00/00/00/wKgz6lnduTeAMdrcAAEoRmXZPp870.jpeg")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011142634105-1857091563.png",alt:"img"}})]),s._v(" "),a("p",[s._v("è¿”å›çš„æ–‡ä»¶IDç”±groupã€å­˜å‚¨ç›®å½•ã€ä¸¤çº§å­ç›®å½•ã€fileidã€æ–‡ä»¶åç¼€åï¼ˆç”±å®¢æˆ·ç«¯æŒ‡å®šï¼Œä¸»è¦ç”¨äºåŒºåˆ†æ–‡ä»¶ç±»å‹ï¼‰æ‹¼æ¥è€Œæˆã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011151728965-914197096.png",alt:"img"}})]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_labelTop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å›åˆ°é¡¶éƒ¨"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"ä¸‰ã€å®‰è£…nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ä¸‰ã€å®‰è£…nginx"}},[s._v("#")]),s._v(" ä¸‰ã€å®‰è£…Nginx")]),s._v(" "),a("p",[s._v("ä¸Šé¢å°†æ–‡ä»¶ä¸Šä¼ æˆåŠŸäº†ï¼Œä½†æˆ‘ä»¬æ— æ³•ä¸‹è½½ã€‚å› æ­¤å®‰è£…Nginxä½œä¸ºæœåŠ¡å™¨ä»¥æ”¯æŒHttpæ–¹å¼è®¿é—®æ–‡ä»¶ã€‚åŒæ—¶ï¼Œåé¢å®‰è£…FastDFSçš„Nginxæ¨¡å—ä¹Ÿéœ€è¦Nginxç¯å¢ƒã€‚")]),s._v(" "),a("p",[s._v("Nginxåªéœ€è¦å®‰è£…åˆ°StorageServeræ‰€åœ¨çš„æœåŠ¡å™¨å³å¯ï¼Œç”¨äºè®¿é—®æ–‡ä»¶ã€‚æˆ‘è¿™é‡Œç”±äºæ˜¯å•æœºï¼ŒTrackerServerå’ŒStorageServeråœ¨ä¸€å°æœåŠ¡å™¨ä¸Šã€‚")]),s._v(" "),a("h3",{attrs:{id:"_1ã€å®‰è£…nginxæ‰€éœ€ç¯å¢ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å®‰è£…nginxæ‰€éœ€ç¯å¢ƒ"}},[s._v("#")]),s._v(" 1ã€å®‰è£…nginxæ‰€éœ€ç¯å¢ƒ")]),s._v(" "),a("p",[s._v("â‘  gcc å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# yum install gcc-c++\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¡ PCRE pcre-devel å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# yum install -y pcre pcre-devel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¢ zlib å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# yum install -y zlib zlib-devel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘£ OpenSSL å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# yum install -y openssl openssl-devel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"_2ã€å®‰è£…nginx"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€å®‰è£…nginx"}},[s._v("#")]),s._v(" 2ã€å®‰è£…Nginx")]),s._v(" "),a("p",[s._v("â‘  ä¸‹è½½nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# wget -c https://nginx.org/download/nginx-1.12.1.tar.gz\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¡ è§£å‹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# tar -zxvf nginx-1.12.1.tar.gz\n# cd nginx-1.12.1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘¢ ä½¿ç”¨é»˜è®¤é…ç½®")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ./configure\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘£ ç¼–è¯‘ã€å®‰è£…")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# make\n# make install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("â‘¤ å¯åŠ¨nginx")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /usr/local/nginx/sbin/\n# ./nginx \n\nå…¶å®ƒå‘½ä»¤\n# ./nginx -s stop\n# ./nginx -s quit\n# ./nginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¥ è®¾ç½®å¼€æœºå¯åŠ¨")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /etc/rc.local\n\næ·»åŠ ä¸€è¡Œï¼š\n/usr/local/nginx/sbin/nginx# è®¾ç½®æ‰§è¡Œæƒé™# chmod 755 rc.local\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¦ æŸ¥çœ‹nginxçš„ç‰ˆæœ¬åŠæ¨¡å—")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/usr/local/nginx/sbin/nginx -V\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011165300730-1693050013.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘§ é˜²ç«å¢™ä¸­æ‰“å¼€Nginxç«¯å£ï¼ˆé»˜è®¤çš„ 80ï¼‰")]),s._v(" "),a("p",[s._v("æ·»åŠ åå°±èƒ½åœ¨æœ¬æœºä½¿ç”¨80ç«¯å£è®¿é—®äº†ã€‚")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /etc/sysconfig/iptables\n\næ·»åŠ å¦‚ä¸‹ç«¯å£è¡Œï¼š\n-A INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT\n\né‡å¯é˜²ç«å¢™ï¼š\n# service iptables restart\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011172121746-2118138931.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_3ã€è®¿é—®æ–‡ä»¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3ã€è®¿é—®æ–‡ä»¶"}},[s._v("#")]),s._v(" 3ã€è®¿é—®æ–‡ä»¶")]),s._v(" "),a("p",[s._v("ç®€å•çš„æµ‹è¯•è®¿é—®æ–‡ä»¶")]),s._v(" "),a("p",[s._v("â‘  ä¿®æ”¹nginx.conf")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /usr/local/nginx/conf/nginx.conf\n\næ·»åŠ å¦‚ä¸‹è¡Œï¼Œå°† /group1/M00 æ˜ å°„åˆ° /ljzsg/fastdfs/file/data\nlocation /group1/M00 {\n    alias /ljzsg/fastdfs/file/data;\n}# é‡å¯nginx# /usr/local/nginx/sbin/nginx -s reload\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011180543746-937678567.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘¡ åœ¨æµè§ˆå™¨è®¿é—®ä¹‹å‰ä¸Šä¼ çš„å›¾ç‰‡ã€æˆåŠŸã€‚")]),s._v(" "),a("p",[s._v("http://file.ljzsg.com/group1/M00/00/00/wKgz6lnduTeAMdrcAAEoRmXZPp870.jpeg")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_labelTop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å›åˆ°é¡¶éƒ¨"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"å››ã€fastdfs-é…ç½®-nginx-æ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å››ã€fastdfs-é…ç½®-nginx-æ¨¡å—"}},[s._v("#")]),s._v(" å››ã€FastDFS é…ç½® Nginx æ¨¡å—")]),s._v(" "),a("h3",{attrs:{id:"_1ã€å®‰è£…é…ç½®nginxæ¨¡å—"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€å®‰è£…é…ç½®nginxæ¨¡å—"}},[s._v("#")]),s._v(" 1ã€å®‰è£…é…ç½®Nginxæ¨¡å—")]),s._v(" "),a("p",[s._v("â‘  fastdfs-nginx-module æ¨¡å—è¯´æ˜")]),s._v(" "),a("p",[s._v("FastDFS é€šè¿‡ Tracker æœåŠ¡å™¨ï¼Œå°†æ–‡ä»¶æ”¾åœ¨ Storage æœåŠ¡å™¨å­˜å‚¨ï¼Œ ä½†æ˜¯åŒç»„å­˜å‚¨æœåŠ¡å™¨ä¹‹é—´éœ€è¦è¿›è¡Œæ–‡ä»¶å¤åˆ¶ï¼Œ æœ‰åŒæ­¥å»¶è¿Ÿçš„é—®é¢˜ã€‚")]),s._v(" "),a("p",[s._v("å‡è®¾ Tracker æœåŠ¡å™¨å°†æ–‡ä»¶ä¸Šä¼ åˆ°äº† 192.168.51.128ï¼Œä¸Šä¼ æˆåŠŸåæ–‡ä»¶ IDå·²ç»è¿”å›ç»™å®¢æˆ·ç«¯ã€‚")]),s._v(" "),a("p",[s._v("æ­¤æ—¶ FastDFS å­˜å‚¨é›†ç¾¤æœºåˆ¶ä¼šå°†è¿™ä¸ªæ–‡ä»¶åŒæ­¥åˆ°åŒç»„å­˜å‚¨ 192.168.51.129ï¼Œåœ¨æ–‡ä»¶è¿˜æ²¡æœ‰å¤åˆ¶å®Œæˆçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯å¦‚æœç”¨è¿™ä¸ªæ–‡ä»¶ ID åœ¨ 192.168.51.129 ä¸Šå–æ–‡ä»¶,å°±ä¼šå‡ºç°æ–‡ä»¶æ— æ³•è®¿é—®çš„é”™è¯¯ã€‚")]),s._v(" "),a("p",[s._v("è€Œ fastdfs-nginx-module å¯ä»¥é‡å®šå‘æ–‡ä»¶é“¾æ¥åˆ°æºæœåŠ¡å™¨å–æ–‡ä»¶ï¼Œé¿å…å®¢æˆ·ç«¯ç”±äºå¤åˆ¶å»¶è¿Ÿå¯¼è‡´çš„æ–‡ä»¶æ— æ³•è®¿é—®é”™è¯¯ã€‚")]),s._v(" "),a("p",[s._v("â‘¡ ä¸‹è½½ fastdfs-nginx-moduleã€è§£å‹")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# è¿™é‡Œä¸ºå•¥è¿™ä¹ˆé•¿ä¸€ä¸²å‘¢ï¼Œå› ä¸ºæœ€æ–°ç‰ˆçš„masterä¸å½“å‰nginxæœ‰äº›ç‰ˆæœ¬é—®é¢˜ã€‚\n# wget https://github.com/happyfish100/fastdfs-nginx-module/archive/5e5f3566bbfa57418b5506aaefbe107a42c9fcb1.zip\n\n# è§£å‹\n# unzip 5e5f3566bbfa57418b5506aaefbe107a42c9fcb1.zip\n\n# é‡å‘½å\n# mv fastdfs-nginx-module-5e5f3566bbfa57418b5506aaefbe107a42c9fcb1  fastdfs-nginx-module-master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¢ é…ç½®Nginx")]),s._v(" "),a("p",[s._v("åœ¨nginxä¸­æ·»åŠ æ¨¡å—")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# å…ˆåœæ‰nginxæœåŠ¡# /usr/local/nginx/sbin/nginx -s stopè¿›å…¥è§£å‹åŒ…ç›®å½•\n# cd /softpackages/nginx-1.12.1/\n\n# æ·»åŠ æ¨¡å—\n# ./configure --add-module=../fastdfs-nginx-module-master/src\n\né‡æ–°ç¼–è¯‘ã€å®‰è£…\n# make && make install\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘£ æŸ¥çœ‹Nginxçš„æ¨¡å—")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# /usr/local/nginx/sbin/nginx -V\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æœ‰ä¸‹é¢è¿™ä¸ªå°±è¯´æ˜æ·»åŠ æ¨¡å—æˆåŠŸ")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011224125574-1739252073.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘¤ å¤åˆ¶ fastdfs-nginx-module æºç ä¸­çš„é…ç½®æ–‡ä»¶åˆ°/etc/fdfs ç›®å½•ï¼Œ å¹¶ä¿®æ”¹")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /softpackages/fastdfs-nginx-module-master/src\n\n# cp mod_fastdfs.conf /etc/fdfs/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("ä¿®æ”¹å¦‚ä¸‹é…ç½®ï¼Œå…¶å®ƒé»˜è®¤")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# è¿æ¥è¶…æ—¶æ—¶é—´connect_timeout=10\n\n# Tracker Server\ntracker_server=file.ljzsg.com:22122\n# StorageServer é»˜è®¤ç«¯å£\nstorage_server_port=23000\n\n# å¦‚æœæ–‡ä»¶IDçš„uriä¸­åŒ…å«/group**ï¼Œåˆ™è¦è®¾ç½®ä¸ºtrue\nurl_have_group_name = true\n\n# Storage é…ç½®çš„store_path0è·¯å¾„ï¼Œå¿…é¡»å’Œstorage.confä¸­çš„ä¸€è‡´\nstore_path0=/ljzsg/fastdfs/file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘¥ å¤åˆ¶ FastDFS çš„éƒ¨åˆ†é…ç½®æ–‡ä»¶åˆ°/etc/fdfs ç›®å½•")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# cd /softpackages/fastdfs-5.05/conf/\n\n# cp anti-steal.jpg http.conf mime.types /etc/fdfs/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("â‘¦ é…ç½®nginxï¼Œä¿®æ”¹nginx.conf")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# vim /usr/local/nginx/conf/nginx.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("ä¿®æ”¹é…ç½®ï¼Œå…¶å®ƒçš„é»˜è®¤")]),s._v(" "),a("p",[s._v("åœ¨80ç«¯å£ä¸‹æ·»åŠ fastdfs-nginxæ¨¡å—")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("location ~/group([0-9])/M00 {\n    ngx_fastdfs_module;\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011184247777-40074297.png",alt:"img"}})]),s._v(" "),a("p",[s._v("æ³¨æ„ï¼š")]),s._v(" "),a("p",[s._v("listen 80 ç«¯å£å€¼æ˜¯è¦ä¸ /etc/fdfs/storage.conf ä¸­çš„ http.server_port=80 (å‰é¢æ”¹æˆ80äº†)ç›¸å¯¹åº”ã€‚å¦‚æœæ”¹æˆå…¶å®ƒç«¯å£ï¼Œåˆ™éœ€è¦ç»Ÿä¸€ï¼ŒåŒæ—¶åœ¨é˜²ç«å¢™ä¸­æ‰“å¼€è¯¥ç«¯å£ã€‚")]),s._v(" "),a("p",[s._v("location çš„é…ç½®ï¼Œå¦‚æœæœ‰å¤šä¸ªgroupåˆ™é…ç½®location ~/group([0-9])/M00 ï¼Œæ²¡æœ‰åˆ™ä¸ç”¨é…groupã€‚")]),s._v(" "),a("p",[s._v("â‘§ åœ¨/ljzsg/fastdfs/file æ–‡ä»¶å­˜å‚¨ç›®å½•ä¸‹åˆ›å»ºè½¯è¿æ¥ï¼Œå°†å…¶é“¾æ¥åˆ°å®é™…å­˜æ”¾æ•°æ®çš„ç›®å½•ï¼Œè¿™ä¸€æ­¥å¯ä»¥çœç•¥ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# ln -s /ljzsg/fastdfs/file/data/ /ljzsg/fastdfs/file/data/M00 \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("â‘¨ å¯åŠ¨nginx")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# /usr/local/nginx/sbin/nginx\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("æ‰“å°å¤„å¦‚ä¸‹å°±ç®—é…ç½®æˆåŠŸ")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171011230509512-654301113.png",alt:"img"}})]),s._v(" "),a("p",[s._v("â‘© åœ¨åœ°å€æ è®¿é—®ã€‚")]),s._v(" "),a("p",[s._v("èƒ½ä¸‹è½½æ–‡ä»¶å°±ç®—å®‰è£…æˆåŠŸã€‚æ³¨æ„å’Œç¬¬ä¸‰ç‚¹ä¸­ç›´æ¥ä½¿ç”¨nginxè·¯ç”±è®¿é—®ä¸åŒçš„æ˜¯ï¼Œè¿™é‡Œé…ç½® fastdfs-nginx-module æ¨¡å—ï¼Œå¯ä»¥é‡å®šå‘æ–‡ä»¶é“¾æ¥åˆ°æºæœåŠ¡å™¨å–æ–‡ä»¶ã€‚")]),s._v(" "),a("p",[s._v("http://file.ljzsg.com/group1/M00/00/00/wKgz6lnduTeAMdrcAAEoRmXZPp870.jpeg")]),s._v(" "),a("p",[s._v("æœ€ç»ˆéƒ¨ç½²ç»“æ„å›¾(ç›—çš„å›¾)ï¼šå¯ä»¥æŒ‰ç…§ä¸‹é¢çš„ç»“æ„æ­å»ºç¯å¢ƒã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171012180511480-692747720.png",alt:"img"}})]),s._v(" "),a("p",[a("a",{attrs:{href:"https://www.cnblogs.com/chiangchou/p/fastdfs.html#_labelTop",target:"_blank",rel:"noopener noreferrer"}},[s._v("å›åˆ°é¡¶éƒ¨"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"äº”ã€javaå®¢æˆ·ç«¯"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#äº”ã€javaå®¢æˆ·ç«¯"}},[s._v("#")]),s._v(" äº”ã€Javaå®¢æˆ·ç«¯")]),s._v(" "),a("p",[s._v("å‰é¢æ–‡ä»¶ç³»ç»Ÿå¹³å°æ­å»ºå¥½äº†ï¼Œç°åœ¨å°±è¦å†™å®¢æˆ·ç«¯ä»£ç åœ¨ç³»ç»Ÿä¸­å®ç°ä¸Šä¼ ä¸‹è½½ï¼Œè¿™é‡Œåªæ˜¯ç®€å•çš„æµ‹è¯•ä»£ç ã€‚")]),s._v(" "),a("h3",{attrs:{id:"_1ã€é¦–å…ˆéœ€è¦æ­å»º-fastdfs-å®¢æˆ·ç«¯javaå¼€å‘ç¯å¢ƒ"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1ã€é¦–å…ˆéœ€è¦æ­å»º-fastdfs-å®¢æˆ·ç«¯javaå¼€å‘ç¯å¢ƒ"}},[s._v("#")]),s._v(" 1ã€é¦–å…ˆéœ€è¦æ­å»º FastDFS å®¢æˆ·ç«¯Javaå¼€å‘ç¯å¢ƒ")]),s._v(" "),a("p",[s._v("â‘  é¡¹ç›®ä¸­ä½¿ç”¨mavenè¿›è¡Œä¾èµ–ç®¡ç†ï¼Œå¯ä»¥åœ¨pom.xmlä¸­å¼•å…¥å¦‚ä¸‹ä¾èµ–å³å¯ï¼š")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("<dependency>\n   <groupId>net.oschina.zcx7878</groupId>\n   <artifactId>fastdfs-client-java</artifactId>\n   <version>1.27.0.0</version>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("å…¶å®ƒçš„æ–¹å¼ï¼Œå‚è€ƒå®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/happyfish100/fastdfs-client-java")]),s._v(" "),a("p",[s._v("â‘¡ å¼•å…¥é…ç½®æ–‡ä»¶")]),s._v(" "),a("p",[s._v("å¯ç›´æ¥å¤åˆ¶åŒ…ä¸‹çš„ fastdfs-client.properties.sample æˆ–è€… fdfs_client.conf.sampleï¼Œåˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œå»æ‰.sampleã€‚")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171012112805371-395330483.png",alt:"img"}})]),s._v(" "),a("p",[s._v("æˆ‘è¿™é‡Œç›´æ¥å¤åˆ¶ fastdfs-client.properties.sample ä¸­çš„é…ç½®åˆ°é¡¹ç›®é…ç½®æ–‡ä»¶ config.properties ä¸­ï¼Œä¿®æ”¹tracker_serversã€‚åªéœ€è¦åŠ è½½è¿™ä¸ªé…ç½®æ–‡ä»¶å³å¯")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://images2017.cnblogs.com/blog/856154/201710/856154-20171012120004199-247798219.png",alt:"img"}})]),s._v(" "),a("h3",{attrs:{id:"_2ã€å®¢æˆ·ç«¯api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2ã€å®¢æˆ·ç«¯api"}},[s._v("#")]),s._v(" 2ã€å®¢æˆ·ç«¯API")]),s._v(" "),a("p",[s._v("ä¸ªäººå°è£…çš„FastDFS Java APIä»¥åŒæ­¥åˆ°githubï¼šhttps://github.com/bojiangzhou/lyyzoo-fastdfs-java.git")]),s._v(" "),a("h3",{attrs:{id:"å…­ã€æƒé™æ§åˆ¶"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#å…­ã€æƒé™æ§åˆ¶"}},[s._v("#")]),s._v(" å…­ã€æƒé™æ§åˆ¶")]),s._v(" "),a("p",[s._v("å‰é¢ä½¿ç”¨nginxæ”¯æŒhttpæ–¹å¼è®¿é—®æ–‡ä»¶ï¼Œä½†æ‰€æœ‰äººéƒ½èƒ½ç›´æ¥è®¿é—®è¿™ä¸ªæ–‡ä»¶æœåŠ¡å™¨äº†ï¼Œæ‰€ä»¥åšä¸€ä¸‹æƒé™æ§åˆ¶ã€‚")]),s._v(" "),a("p",[s._v("FastDFSçš„æƒé™æ§åˆ¶æ˜¯åœ¨æœåŠ¡ç«¯å¼€å¯tokenéªŒè¯ï¼Œå®¢æˆ·ç«¯æ ¹æ®æ–‡ä»¶åã€å½“å‰unixæ—¶é—´æˆ³ã€ç§˜é’¥è·å–tokenï¼Œåœ¨åœ°å€ä¸­å¸¦ä¸Štokenå‚æ•°å³å¯é€šè¿‡httpæ–¹å¼è®¿é—®æ–‡ä»¶ã€‚")]),s._v(" "),a("p",[s._v("â‘  æœåŠ¡ç«¯å¼€å¯tokenéªŒè¯")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ä¿®æ”¹http.conf\n# vim /etc/fdfs/http.conf\n\nè®¾ç½®ä¸ºtrueè¡¨ç¤ºå¼€å¯tokenéªŒè¯\nhttp.anti_steal.check_token=trueè®¾ç½®tokenå¤±æ•ˆçš„æ—¶é—´å•ä½ä¸ºç§’(s)http.anti_steal.token_ttl=1800\nå¯†é’¥ï¼Œè·Ÿå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶çš„fastdfs.http_secret_keyä¿æŒä¸€è‡´\nhttp.anti_steal.secret_key=FASTDFS1234567890\n\nå¦‚æœtokenæ£€æŸ¥å¤±è´¥ï¼Œè¿”å›çš„é¡µé¢\nhttp.anti_steal.token_check_fail=/ljzsg/fastdfs/page/403.html\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("è®°å¾—é‡å¯æœåŠ¡ã€‚")]),s._v(" "),a("p",[s._v("â‘¡ é…ç½®å®¢æˆ·ç«¯")]),s._v(" "),a("p",[s._v("å®¢æˆ·ç«¯åªéœ€è¦è®¾ç½®å¦‚ä¸‹ä¸¤ä¸ªå‚æ•°å³å¯ï¼Œä¸¤è¾¹çš„å¯†é’¥ä¿æŒä¸€è‡´ã€‚")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# token é˜²ç›—é“¾åŠŸèƒ½\nfastdfs.http_anti_steal_token=true\n# å¯†é’¥\nfastdfs.http_secret_key=FASTDFS1234567890\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("â‘¢ å®¢æˆ·ç«¯ç”Ÿæˆtoken")]),s._v(" "),a("p",[s._v("è®¿é—®æ–‡ä»¶éœ€è¦å¸¦ä¸Šç”Ÿæˆçš„tokenä»¥åŠunixæ—¶é—´æˆ³ï¼Œæ‰€ä»¥è¿”å›çš„tokenæ˜¯tokenå’Œæ—¶é—´æˆ³çš„æ‹¼æ¥ã€‚")]),s._v(" "),a("p",[s._v("ä¹‹åï¼Œå°†tokenæ‹¼æ¥åœ¨åœ°å€åå³å¯è®¿é—®ï¼šfile.ljzsg.com/group1/M00/00/00/wKgzgFnkaXqAIfXyAAEoRmXZPp878.jpeg?token=078d370098b03e9020b82c829c205e1f&ts=1508141521")]),s._v(" "),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(' 1     /**\n 2      * è·å–è®¿é—®æœåŠ¡å™¨çš„tokenï¼Œæ‹¼æ¥åˆ°åœ°å€åé¢\n 3      *\n 4      * @param filepath æ–‡ä»¶è·¯å¾„ group1/M00/00/00/wKgzgFnkTPyAIAUGAAEoRmXZPp876.jpeg\n 5      * @param httpSecretKey å¯†é’¥\n 6      * @return è¿”å›tokenï¼Œå¦‚ï¼š token=078d370098b03e9020b82c829c205e1f&ts=1508141521\n 7      */\n 8     public static String getToken(String filepath, String httpSecretKey){\n 9         // unix seconds\n10         int ts = (int) Instant.now().getEpochSecond();\n11         // token\n12         String token = "null";\n13         try {\n14             token = ProtoCommon.getToken(getFilename(filepath), ts, httpSecretKey);\n15         } catch (UnsupportedEncodingException e) {\n16             e.printStackTrace();\n17         } catch (NoSuchAlgorithmException e) {\n18             e.printStackTrace();\n19         } catch (MyException e) {\n20             e.printStackTrace();\n21         }\n22 \n23         StringBuilder sb = new StringBuilder();\n24         sb.append("token=").append(token);\n25         sb.append("&ts=").append(ts);\n26 \n27         return sb.toString();\n28     }\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("p",[s._v("["),a("img",{attrs:{src:"https://common.cnblogs.com/images/copycode.gif",alt:"å¤åˆ¶ä»£ç "}}),s._v("](javascript:void(0)ğŸ˜‰")]),s._v(" "),a("p",[s._v("â‘£ æ³¨æ„äº‹é¡¹")]),s._v(" "),a("p",[s._v("å¦‚æœç”Ÿæˆçš„tokenéªŒè¯æ— æ³•é€šè¿‡ï¼Œè¯·è¿›è¡Œå¦‚ä¸‹ä¸¤é¡¹æ£€æŸ¥ï¼š\nã€€ã€€A. ç¡®è®¤è°ƒç”¨tokenç”Ÿæˆå‡½æ•°(ProtoCommon.getToken)ï¼Œä¼ é€’çš„æ–‡ä»¶IDä¸­æ²¡æœ‰åŒ…å«group nameã€‚ä¼ é€’çš„æ–‡ä»¶IDæ ¼å¼å½¢å¦‚ï¼šM00/00/00/wKgzgFnkTPyAIAUGAAEoRmXZPp876.jpeg")]),s._v(" "),a("p",[s._v("B. ç¡®è®¤æœåŠ¡å™¨æ—¶é—´åŸºæœ¬æ˜¯ä¸€è‡´çš„ï¼Œæ³¨æ„æœåŠ¡å™¨æ—¶é—´ä¸èƒ½ç›¸å·®å¤ªå¤šï¼Œä¸è¦ç›¸å·®åˆ°åˆ†é’Ÿçº§åˆ«ã€‚")]),s._v(" "),a("p",[s._v("â‘¤ å¯¹æ¯”ä¸‹å‘ç°ï¼Œå¦‚æœç³»ç»Ÿæ–‡ä»¶éšç§æ€§è¾ƒé«˜ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡fastdfs-clientæä¾›çš„APIå»è®¿é—®å³å¯ï¼Œä¸ç”¨å†é…ç½®Nginxèµ°httpè®¿é—®ã€‚é…ç½®Nginxçš„ä¸»è¦ç›®çš„æ˜¯ä¸ºäº†å¿«é€Ÿè®¿é—®æœåŠ¡å™¨çš„æ–‡ä»¶(å¦‚å›¾ç‰‡)ï¼Œå¦‚æœè¿˜è¦åŠ æƒé™éªŒè¯ï¼Œåˆ™éœ€è¦å®¢æˆ·ç«¯ç”Ÿæˆtokenï¼Œå…¶å®å·²ç»æ²¡æœ‰å¤šå¤§æ„ä¹‰ã€‚")]),s._v(" "),a("p",[s._v("å…³é”®æ˜¯ï¼Œè¿™é‡Œæˆ‘æ²¡æ‰¾åˆ°FastDFSå¦‚ä½•å¯¹éƒ¨åˆ†èµ„æºåŠ tokenéªŒè¯ï¼Œéƒ¨åˆ†å¼€æ”¾ã€‚æœ‰çŸ¥é“çš„è¿˜è¯·ç•™è¨€ã€‚")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("OKï¼Œä»¥ä¸Šå°±æ˜¯å•æœºä¸­ä½¿ç”¨FastDFSæ­å»ºæ–‡ä»¶ç³»ç»Ÿå¹¶ä¸Šä¼ ä¸‹è½½çš„è¿‡ç¨‹ã€‚")]),s._v(" "),a("p",[s._v("å®Œï¼ï¼ï¼")]),s._v(" "),a("p",[s._v("åŸæ–‡é“¾æ¥ï¼šhttps://www.cnblogs.com/chiangchou/p/fastdfs.html")])])}),[],!1,null,null,null);a.default=n.exports}}]);