(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{442:function(s,n,a){"use strict";a.r(n);var e=a(0),t=Object(e.a)({},(function(){var s=this,n=s._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 先将阿里申请的证书 生成密钥")]),s._v("\nkubectl "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--kubeconfig")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/lcnc-ack-prod create secret tls bmw.ulises.com-ingress-secret "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--cert")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8579111_bmw.ulises.cn.pem "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--key")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("8579111_bmw.ulises.cn.key\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 服务创建")]),s._v("\nkubectl "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--kubeconfig")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/root/lcnc-ack-prod get secret bmw.ulises.com-ingress-secret "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-o")]),s._v(" yaml "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" bmw.ulises.com-ingress-secret.yaml\n\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LC-NC-Marketplace-POC ingress-test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat test-deployment-service.yaml")]),s._v("\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: test-web1\n  labels:\n    app: test-web1\nspec:\n  replicas: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n  selector:\n    matchLabels:\n      app: test-web1\n  template:\n    metadata:\n      labels:\n        app: test-web1\n    spec:\n      containers:\n      - name: test-web1\n        imagePullPolicy: IfNotPresent\n        image: registry.cn-hangzhou.aliyuncs.com/yilong/ingress-test:web1\n        ports:\n        - containerPort: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n---\napiVersion: v1\nkind: Service\nmetadata:\n  name: web1-service\nspec:\n  type: ClusterIP\n  selector:\n    app: test-web1\n  ports:\n    - port: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n      targetPort: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### 修改ingress配置")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@LC-NC-Marketplace-POC ingress-test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat test-ingress.yaml")]),s._v("\napiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: test-ingress\n  namespace: default\nspec:\n  tls:\n  - hosts:\n      - bmw.ulises.cn\n    secretName: bmw.ulises.com-ingress-secret\n  rules:\n  - host: bmw.ulises.cn\n    http:\n      paths:\n      - path: /foo\n        backend:\n          service:\n            name: web1-service\n            port:\n              number: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n        pathType: ImplementationSpecific\n      - path: /bar\n        backend:\n          service:\n            name: web1-service\n            port:\n              number: "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("8080")]),s._v("\n        pathType: ImplementationSpecific\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br"),n("span",{staticClass:"line-number"},[s._v("66")]),n("br"),n("span",{staticClass:"line-number"},[s._v("67")]),n("br"),n("span",{staticClass:"line-number"},[s._v("68")]),n("br"),n("span",{staticClass:"line-number"},[s._v("69")]),n("br"),n("span",{staticClass:"line-number"},[s._v("70")]),n("br"),n("span",{staticClass:"line-number"},[s._v("71")]),n("br"),n("span",{staticClass:"line-number"},[s._v("72")]),n("br"),n("span",{staticClass:"line-number"},[s._v("73")]),n("br")])]),n("p",[s._v("原文链接："),n("a",{attrs:{href:"https://ulises.cn/archives/ingress-pei-zhi-zheng-shu",target:"_blank",rel:"noopener noreferrer"}},[s._v("ingress配置证书"),n("OutboundLink")],1)])])}),[],!1,null,null,null);n.default=t.exports}}]);