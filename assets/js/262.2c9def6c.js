(window.webpackJsonp=window.webpackJsonp||[]).push([[262],{615:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简介"}},[s._v("#")]),s._v(" 简介")]),s._v(" "),a("blockquote",[a("p",[s._v("你还在为个人域名的证书而烦恼嘛？试试 Let’s Encrypt 吧，它能提供免费的泛域名证书，让你的子域名都能有一个安全的小锁头，非常适合因国内云计算厂商 ssl 证书数量限制而困扰的小伙伴，快来试试吧。")]),s._v(" "),a("p",[s._v("先介绍一下这次主角：letsencrypt.org , 是一个免费的、自动化的、开放的证书颁发机构。截至 2018 年 9 月，它的全球 SSL 证书市场份额已超过 50%，得到主流浏览器和厂商的认可与支持。Let’s Encrypt 证书提供免费的申请，但每次申请到的 SSL 证书有效期只有 90 天，可以通过脚本实现提前自动续约达到自动化永久免费使用的目的。")]),s._v(" "),a("p",[s._v("利用 Let’s Encrypt 免费提供泛域名证书的申请，我们可以借助服务器脚本实现到期续签，自动刷新过期时间。")])]),s._v(" "),a("h3",{attrs:{id:"准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备"}},[s._v("#")]),s._v(" 准备")]),s._v(" "),a("p",[s._v("一个域名")]),s._v(" "),a("p",[s._v("一台服务器（用于申请证书以及运行续签脚本）")]),s._v(" "),a("p",[s._v("本教程以申请 aqcoder.cn（腾讯云）以及 notifyou.top（阿里云）的泛域名证书为例")]),s._v(" "),a("h3",{attrs:{id:"下载仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#下载仓库"}},[s._v("#")]),s._v(" 下载仓库")]),s._v(" "),a("p",[s._v("下载仓库：")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://github.com/acmesh-official/acme.sh.git \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("下载仓库 (加速)：")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("git")]),s._v(" clone https://gitclone.com/github.com/acmesh-official/acme.sh.git \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"上传acme-sh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上传acme-sh"}},[s._v("#")]),s._v(" 上传acme.sh")]),s._v(" "),a("p",[s._v("上传 acme.sh 到服务器 /root 目录，使用 root 用户执行后面的命令（acme.sh 也有说明可以使用其他用户运行，但为确保一些权限问题，先使用 root 用户运行成功，再尝试使用其他用户）")]),s._v(" "),a("h3",{attrs:{id:"执行安装命令"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#执行安装命令"}},[s._v("#")]),s._v(" 执行安装命令")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--install")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"申请阿里云key和secret"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#申请阿里云key和secret"}},[s._v("#")]),s._v(" 申请阿里云key和Secret")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/04/c26a0091b1d285ea.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/04/9c63827222b6e5db.png",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2024/04/bd83dd600f5f0501.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"配置secretkey和secretid"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置secretkey和secretid"}},[s._v("#")]),s._v(" 配置secretkey和secretid")]),s._v(" "),a("p",[s._v("域名服务商申请 SecretId 和 SecretKey，阿里云的查看这里，腾讯云的查看这里")]),s._v(" "),a("p",[s._v("将上述的 SecretKey 和 SecretId 写到 ~/..bash_profile，保存方法：https://github.com/acmesh-official/acme.sh/wiki/dnsapi")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[s._v(" .bash_profile\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Get the aliases and functions")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-f")]),s._v(" ~/.bashrc "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v(" ~/.bashrc\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# User specific environment and startup programs")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")])]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$PATH")]),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("$HOME")]),s._v("/bin\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#腾讯云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DP_Id")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"A1111111111111111s"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("DP_Key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"F11111111111111111b"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#阿里云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Ali_Key")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"L1111111111111111111t"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("Ali_Secret")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"p1111111111111111C"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("PATH")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h3",{attrs:{id:"申请证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#申请证书"}},[s._v("#")]),s._v(" 申请证书")]),s._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#腾讯云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--issue")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dns")]),s._v(" dns_dp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" aqcoder.cn  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" *.aqcoder.cn\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#阿里云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--issue")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dns")]),s._v(" dns_ali "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" aqcoder.cn  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" *.aqcoder.cn\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("出现错误是因为还没有通过 Let’s Encrypt 验证，而 Let’s Encrypt 提供两种方式验证，一个是 HTTP 文件验证，一个是 DNS-API 验证，这里推荐使用 DNS-API 验证")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/26b4449f62ecc258.png",alt:"26b4449f62ecc258.png"}})]),s._v(" "),a("h3",{attrs:{id:"添加解析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加解析"}},[s._v("#")]),s._v(" 添加解析")]),s._v(" "),a("p",[s._v("阿里云添加 TXT 解析")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/341efe7c875cefa2.png",alt:"341efe7c875cefa2.png"}})]),s._v(" "),a("p",[s._v("腾讯云添加 TXT 解析")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/74fc803e7329a33a.png",alt:"74fc803e7329a33a.png"}})]),s._v(" "),a("h3",{attrs:{id:"重新运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#重新运行"}},[s._v("#")]),s._v(" 重新运行")]),s._v(" "),a("p",[s._v("稍等片刻重新运行，记得添加 --renew 参数")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#腾讯云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--issue")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dns")]),s._v(" dns_dp "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" aqcoder.cn  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" *.aqcoder.cn "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--renew")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#阿里云")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--issue")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--dns")]),s._v(" dns_ali "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" aqcoder.cn  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" *.aqcoder.cn "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--renew")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/39c23fa47657420a.png",alt:"39c23fa47657420a.png"}})]),s._v(" "),a("h3",{attrs:{id:"查看定时任务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看定时任务"}},[s._v("#")]),s._v(" 查看定时任务")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("crontab")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-e")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("可以看到，acme.sh 已经生成一个定时任务了")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/ba6bcd825492a274.png",alt:"ba6bcd825492a274.png"}})]),s._v(" "),a("h3",{attrs:{id:"拷贝证书"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拷贝证书"}},[s._v("#")]),s._v(" 拷贝证书")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" acme.sh --install-cert "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" aqcoder.cn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v(" \n--key-file /etc/ssl/aqcoder.cn/aqcoder.cn.key  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--fullchain-file /etc/ssl/aqcoder.cn/aqcoder.cn.cer  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reloadcmd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'service nginx force-reload'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#cer证书windows用的比较多")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#linux另外一种格式证书")]),s._v("\nacme.sh --install-cert "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" zzppjj.top "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--cert-file /data/acme/zzppjj.top/cert.pem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--key-file /data/acme/zzppjj.top/key.pem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--fullchain-file /data/acme/zzppjj.top/fullchain.pem "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--reloadcmd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"echo \\'),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('"'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("$current"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v('" +%s'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' > /data/acme/zzppjj.top/time.log"')]),s._v("\n\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#另一种创建方式")]),s._v("\n~/.acme.sh/acme.sh "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--installcert")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-d")]),s._v(" jiasu01.quantchatai.top --key-file /root/cert/jiasu01.key --fullchain-file /root/cert/jiasu01.crt\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#crt证书linux系统比较多")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("拷贝证书可以让 acme.sh 申请到的证书复制到指定目录，执行后拷贝证书的操作也会在定时任务中。")]),s._v(" "),a("h3",{attrs:{id:"测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试"}},[s._v("#")]),s._v(" 测试")]),s._v(" "),a("h4",{attrs:{id:"添加解析-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加解析-2"}},[s._v("#")]),s._v(" 添加解析")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/341efe7c875cefa2.png",alt:"341efe7c875cefa2.png"}})]),s._v(" "),a("h4",{attrs:{id:"nginx配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nginx配置"}},[s._v("#")]),s._v(" nginx配置")]),s._v(" "),a("p",[s._v("zzppjj.top")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#test.aqcoder.cn")]),s._v("\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name test.zzppjj.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    rewrite ^"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v(".*"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("$ https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$request_uri")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nserver "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    listen "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("443")]),s._v(" ssl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    server_name test.zzppjj.top"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    ssl_certificate /etc/ssl/aqcoder.cn/aqcoder.cn.cer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_certificate_key /etc/ssl/aqcoder.cn/aqcoder.cn.key"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_session_cache    shared:SSL:4m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_session_timeout  10m"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_ciphers  HIGH:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("aNULL:"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("MD5"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    ssl_prefer_server_ciphers  on"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    charset utf-8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\n    location / "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        proxy_pass http://127.0.0.1:5704"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h3",{attrs:{id:"访问成功-出现https安全小锁头"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问成功-出现https安全小锁头"}},[s._v("#")]),s._v(" 访问成功，出现https安全小锁头")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/04/db9eacf052839dca.jpg",alt:"db9eacf052839dca.jpg"}})]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("[原文链接]("),a("a",{attrs:{href:"https://blog.aqcoder.cn/posts/84609bb0/#%E7%BB%93%E8%AF%AD",target:"_blank",rel:"noopener noreferrer"}},[s._v("给你的域名申请一个泛域名证书吧 | 枫叶"),a("OutboundLink")],1),s._v(")")]),s._v(" "),a("h3",{attrs:{id:"参考文章"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[s._v("#")]),s._v(" 参考文章")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://juejin.cn/post/7136001093720342542",target:"_blank",rel:"noopener noreferrer"}},[s._v("Let’s Encrypt 免费泛域名 SSL 证书申请及自动续签"),a("OutboundLink")],1),s._v(")")]),s._v(" "),a("p",[a("a",{attrs:{href:"https://blog.csdn.net/qq_33317586/article/details/84842398",target:"_blank",rel:"noopener noreferrer"}},[s._v("第一次使用acme.sh 手动生成证书"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://cloud.tencent.com/developer/article/1736866",target:"_blank",rel:"noopener noreferrer"}},[s._v("acme从letsencrypt 生成免费通配符/泛域名SSL证书并自动续期"),a("OutboundLink")],1)]),s._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/acmesh-official/acme.sh/wiki/dnsapi",target:"_blank",rel:"noopener noreferrer"}},[s._v("dnsapi · acmesh-official/acme.sh Wiki"),a("OutboundLink")],1)])])}),[],!1,null,null,null);a.default=n.exports}}]);