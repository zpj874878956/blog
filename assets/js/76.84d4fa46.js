(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{429:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"ansible之roles简单使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ansible之roles简单使用"}},[s._v("#")]),s._v(" "),a("a",{attrs:{href:"https://www.cnblogs.com/lvzhenjiang/p/14199463.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("ansible之roles简单使用"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("目录")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/lvzhenjiang/p/14199463.html#%E4%B8%80%E3%80%81roles%E7%AE%80%E4%BB%8B",target:"_blank",rel:"noopener noreferrer"}},[s._v("一、roles简介"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/lvzhenjiang/p/14199463.html#%E4%BA%8C%E3%80%81%E7%AE%80%E5%8D%95%E7%9A%84roles%E7%A4%BA%E4%BE%8B",target:"_blank",rel:"noopener noreferrer"}},[s._v("二、简单的roles示例"),a("OutboundLink")],1)]),s._v(" "),a("li",[a("a",{attrs:{href:"https://www.cnblogs.com/lvzhenjiang/p/14199463.html#%E4%B8%89%E3%80%81roles%E7%A4%BA%E4%BE%8B%E4%BA%8C",target:"_blank",rel:"noopener noreferrer"}},[s._v("三、roles示例二"),a("OutboundLink")],1)])]),s._v(" "),a("h3",{attrs:{id:"一、roles简介"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#一、roles简介"}},[s._v("#")]),s._v(" 一、roles简介")]),s._v(" "),a("p",[s._v("将多种不同的tasks的文件集中存储在某个目录下，则该目录就是角色，角色一般存放在/etc/ansible/roles/目录下，可通过ansible的配置文件来调整默认的角色目录，/etc/ansible/roles/目录下有很多子目录，其中每一个子目录对应一个角色，每个角色也有自己的目录结构，如图：")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/lvzhenjiang/document/raw/master/%E5%B0%8F%E4%B9%A6%E5%8C%A0/20200322142808.png",alt:"20200322142808"}})]),s._v(" "),a("p",[s._v("每个角色的定义，以特定的层级目录结构进行组织。比如：")]),s._v(" "),a("ul",[a("li",[s._v("files：存放有copy或script等模块调用的文件；")]),s._v(" "),a("li",[s._v("templates：存放template模块查找所需要的模板文件的目录；")]),s._v(" "),a("li",[s._v("tasks：任务存放的目录；")]),s._v(" "),a("li",[s._v("handlers：存放相关触发执行器的目录；")]),s._v(" "),a("li",[s._v("vars：变量存放的目录；")]),s._v(" "),a("li",[s._v("meta：用于存放此角色元数据；")]),s._v(" "),a("li",[s._v("default：默认变量存放的目录，文件中定义了此角色使用的默认变量；")])]),s._v(" "),a("p",[s._v("上述目录中，tasks、handlers、vars、meta、default至少应该包含一个main.yaml文件，该目录下也可由其他.yaml文件，但是需要在main.yml文件中用include指令将其他.yml文件包含起来。")]),s._v(" "),a("h3",{attrs:{id:"二、简单的roles示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#二、简单的roles示例"}},[s._v("#")]),s._v(" 二、简单的roles示例")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" roles   \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#创建一个目录，名称为roles。官方推荐在/etc/ansible/roles/这个目录，不过在哪里都是可以的")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" roles/nginx\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" roles/nginx/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tasks templates\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tasks/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" user.yaml \n- name: create user\n  user: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("uid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("system")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("shell")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin/nologin\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" group.yaml \n- name: create group\n  group: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("gid")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("80")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" yum.yaml \n- name: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" package\n  yum: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" templ.yaml \n- name: copy conf\n  template: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx.conf.j2 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dest")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/nginx/nginx.conf \n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" stservice.yaml \n- name: start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n  service: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("nginx "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("enabled")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" main.yaml \n- include: group.yaml\n- include: user.yaml\n- include: yum.yaml\n- include: templ.yaml\n- include: stservice.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果需要调用别的角色的yaml文件，也可以这样写，比如：- include：roles/httpd/tasks/copyfile.yaml")]),s._v("\n注意：copyfiile.yaml文件中的源路径必须是绝对路径\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nnginx.conf.j2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#该文件就是nginx的配置文件改名了而已")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" nginx.yaml \n- hosts: webservers\n  remote_user: root\n  roles:\n    - role: nginx    \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#定义了多个角色，也可在接着写，每行调用一个角色")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#也可以定义tags标签，比如：- { roles： httpd ，tags：['web','httpd']}或- { roles： httpd ，tags：'web'  如果需要加when语句，在此处添加 }都可以")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nnginx.yaml  roles\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#确保调用nginx的yaml文件是和roles是在同一目录下的")]),s._v("\n$ tree\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── nginx.yaml\n└── roles\n    └── nginx\n        ├── tasks\n        │   ├── group.yaml\n        │   ├── main.yaml\n        │   ├── reservice.yaml\n        │   ├── stservice.yaml\n        │   ├── templ.yaml\n        │   ├── user.yaml\n        │   └── yum.yaml\n        └── templates\n            └── nginx.conf.j2\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#确保目录的层次效果是这样的")]),s._v("\n$ ansible-playbook nginx.yaml \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#如果定义了标签，就可对标签进行操作（比如：web或httpd）")]),s._v("\n$ ansible webservers "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" shell "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ss -lntp | grep nginx'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#确认被控端的主机nginx已经启动")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br")])]),a("p",[s._v("一个简单的nginx的roles已经编写完成了！")]),s._v(" "),a("h3",{attrs:{id:"三、roles示例二"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#三、roles示例二"}},[s._v("#")]),s._v(" 三、roles示例二")]),s._v(" "),a("div",{staticClass:"language-shell line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" app\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" app/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" tasks templates vars handlers files\n$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" tasks/\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" group.yaml \n- name: create group\n  group: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("apache "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("system")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" user.yaml \n- name: create user\n  user: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("apache "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("group")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("apache "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("system")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("yes "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("shell")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/sbin/nologin\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" yum.yaml \n- name: "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" package\n  yum: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("httpd\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" templ.yaml \n- name: copy "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("\n  template: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("httpd.conf.j2 "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dest")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/httpd/httpd.conf\n  notify: restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" copyfile.yaml \n- name: copy config\n  copy: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("src")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("vhosts.conf "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dest")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/etc/httpd/conf.d/ "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("owner")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("apache\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" start.yaml \n- name: start "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n  service: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("httpd "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("started\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" main.yaml \n- include: group.yaml\n- include: user.yaml\n- include: yum.yaml\n- include: templ.yaml\n- include: copyfile.yaml\n- include: start.yaml\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v(" files/vhosts.conf \nfiles/vhosts.conf\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#空文件用于测试")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" handlers/main.yaml \n- name: restart "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n  service: "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("name")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("httpd "),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("state")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("restarted\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" templates/httpd.conf.j2 \n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#httpd的配置文件")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" vars/main.yaml \nusername: apache\ngroupname: apache\n$ tree\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(".")]),s._v("\n├── files\n│   └── vhosts.conf\n├── handlers\n│   └── main.yaml\n├── tasks\n│   ├── copyfile.yaml\n│   ├── group.yaml\n│   ├── main.yaml\n│   ├── start.yaml\n│   ├── templ.yaml\n│   ├── user.yaml\n│   └── yum.yaml\n├── templates\n│   └── httpd.conf.j2\n└── vars\n    └── main.yaml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#目录结构")]),s._v("\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cat")]),s._v(" httpd.yaml \n---\n- hosts: webservers\n  remote_user: root\n  roles:\n    - httpd\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\nhttpd.yaml  nginx.yaml  roles\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#确保与roles目录在同一目录下")]),s._v("\n$ ansible-playbook httpd.yaml \n$ ansible all "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-m")]),s._v(" shell "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-a")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ps -ef | grep apache'")]),s._v("\n//根据配置文件中修改的内容自行进行修改\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br")])]),a("p",[s._v("*************** 当你发现自己的才华撑不起野心时，就请安静下来学习吧！***************")]),s._v(" "),a("p",[s._v("原文链接：https://www.cnblogs.com/lvzhenjiang/p/14199463.html")])])}),[],!1,null,null,null);a.default=e.exports}}]);