(window.webpackJsonp=window.webpackJsonp||[]).push([[265],{619:function(s,a,t){"use strict";t.r(a);var r=t(0),e=Object(r.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[s._v("#")]),s._v(" 介绍")]),s._v(" "),a("blockquote",[a("p",[s._v("内网穿透是一种反向代理技术，允许你从任何位置访问一台处于复杂网络环境中的机器。它的应用场景有很多，例如，你在家中使用树莓派作为 Home Assistant 家庭中枢，但家庭网络的网关没有公网 IP，那么在离开家时就无法控制家中的智能设备。而在配置内网穿透后，就可以随时随地通过代理服务器的公网 IP 连接到树莓派，从而访问 Home Assistant 的服务。")]),s._v(" "),a("p",[s._v("内网穿透的原理是，利用一个具有固定公网 IP 的主机做跳板，让两个客户端建立 P2P 连接；如果不成功，就通过跳板主机中转，将所有流量代理到内网中的主机上。为不同需求所设计的内网穿透解决方案有很多，例如 "),a("a",{attrs:{href:"https://github.com/fatedier/frp",target:"_blank",rel:"noopener noreferrer"}},[s._v("frp"),a("OutboundLink")],1),s._v(" 和 Cloudflare Tunnel。frp 允许你将内网中主机的端口映射到公网的主机上，因此使用起来非常直接。而 frp 的缺点是主机和端口都需要单独配置，如果要用多台设备组网，会有些繁琐；此外，这些端口都会直接暴露在公网上，安全性较差。另一个方案 Cloudflare Tunnel，可以直接用 Cloudflare 的节点进行中转，是非常不错的选择，但缺点和 frp 类似，在多台设备需要互相访问时很麻烦。如果需要将不同网络环境中的多台设备都配置内网穿透，并能够互相访问，那么使用 ZeroTier 搭建虚拟局域网是一个不错的选择")])]),s._v(" "),a("h1",{attrs:{id:"部署server端"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署server端"}},[s._v("#")]),s._v(" 部署server端")]),s._v(" "),a("p",[s._v("在有公网ip的服务器部署，下载部署安装包")]),s._v(" "),a("p",[s._v("下载地址：https://github.com/fatedier/frp")]),s._v(" "),a("p",[s._v("在部署部署目录解压")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xf")]),s._v(" frp_0.58.0_linux_amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frp_0.58.0_linux_amd64\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/frp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frps.toml /etc/frp/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frps /usr/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("修改server端配置")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/frp/frps.toml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.toml")]),s._v("\nvhostHTTPPort "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6001")]),s._v("\nbindPort "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端与客户端通信端口")]),s._v("\ntransport.tls.force "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端将只接受 TLS链接")]),s._v("\n\nauth.token "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 身份验证令牌，frpc要与frps一致")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Server Dashboard，可以查看frp服务状态以及统计信息")]),s._v("\nwebServer.addr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台管理地址")]),s._v("\nwebServer.port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台管理端口")]),s._v("\nwebServer.user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台登录用户名")]),s._v("\nwebServer.password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台登录密码")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("启动服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" frps "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /etc/frp/frps.toml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"部署client服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署client服务"}},[s._v("#")]),s._v(" 部署client服务")]),s._v(" "),a("p",[s._v("在有nei网ip的服务器部署，下载部署安装包")]),s._v(" "),a("p",[s._v("下载地址：https://github.com/fatedier/frp")]),s._v(" "),a("p",[s._v("在部署部署目录解压")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-xf")]),s._v(" frp_0.58.0_linux_amd64.tar.gz\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" frp_0.58.0_linux_amd64\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" /etc/frp\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frpc.toml /etc/frp/\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" frpc /usr/bin/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[s._v("修改server端配置")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/frp/frps.toml\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# frps.toml")]),s._v("\nvhostHTTPPort "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6001")]),s._v("\nbindPort "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7000")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端与客户端通信端口")]),s._v("\ntransport.tls.force "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务端将只接受 TLS链接")]),s._v("\n\nauth.token "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 身份验证令牌，frpc要与frps一致")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Server Dashboard，可以查看frp服务状态以及统计信息")]),s._v("\nwebServer.addr "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0.0.0.0"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台管理地址")]),s._v("\nwebServer.port "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("7500")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台管理端口")]),s._v("\nwebServer.user "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"admin"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台登录用户名")]),s._v("\nwebServer.password "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxxx"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 后台登录密码")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("启动服务")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("nohup")]),s._v(" frpc "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v(" /etc/frp/frpc.toml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);