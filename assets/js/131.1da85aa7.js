(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{484:function(a,n,s){"use strict";s.r(n);var t=s(0),r=Object(t.a)({},(function(){var a=this,n=a._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[n("h1",{attrs:{id:"gitlab-runner安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#gitlab-runner安装"}},[a._v("#")]),a._v(" GitLab Runner安装")]),a._v(" "),n("p",[a._v("可以在GNU / Linux，macOS，FreeBSD和Windows上"),n("a",{attrs:{href:"https://docs.gitlab.com/12.8/runner/install/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("安装"),n("OutboundLink")],1),a._v("和使用GitLab Runner 。您可以使用Docker安装它，手动下载二进制文件，也可以使用GitLab提供的rpm / deb软件包的存储库。")]),a._v(" "),n("h2",{attrs:{id:"_1-使用gitlab官方仓库安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-使用gitlab官方仓库安装"}},[a._v("#")]),a._v(" 1. 使用GItLab官方仓库安装")]),a._v(" "),n("ul",[n("li",[a._v("重点掌握CentOS系统的安装方式")]),a._v(" "),n("li",[a._v("重点掌握Ubuntu系统的安装方式")])]),a._v(" "),n("p",[a._v("我们提供Debian，Ubuntu，Mint，RHEL，Fedora和CentOS当前受支持版本的软件包。")]),a._v(" "),n("table",[n("thead",[n("tr",[n("th",[a._v("Distribution")]),a._v(" "),n("th",[a._v("Version")]),a._v(" "),n("th",[a._v("End of Life date")])])]),a._v(" "),n("tbody",[n("tr",[n("td",[a._v("Debian")]),a._v(" "),n("td",[a._v("stretch")]),a._v(" "),n("td",[a._v("approx. 2022")])]),a._v(" "),n("tr",[n("td",[a._v("Debian")]),a._v(" "),n("td",[a._v("jessie")]),a._v(" "),n("td",[a._v("June 2020")])]),a._v(" "),n("tr",[n("td",[a._v("Ubuntu")]),a._v(" "),n("td",[a._v("bionic")]),a._v(" "),n("td",[a._v("April 2023")])]),a._v(" "),n("tr",[n("td",[a._v("Ubuntu")]),a._v(" "),n("td",[a._v("xenial")]),a._v(" "),n("td",[a._v("April 2021")])]),a._v(" "),n("tr",[n("td",[a._v("Mint")]),a._v(" "),n("td",[a._v("sonya")]),a._v(" "),n("td",[a._v("approx. 2021")])]),a._v(" "),n("tr",[n("td",[a._v("Mint")]),a._v(" "),n("td",[a._v("serena")]),a._v(" "),n("td",[a._v("approx. 2021")])]),a._v(" "),n("tr",[n("td",[a._v("Mint")]),a._v(" "),n("td",[a._v("sarah")]),a._v(" "),n("td",[a._v("approx. 2021")])]),a._v(" "),n("tr",[n("td",[a._v("RHEL/CentOS")]),a._v(" "),n("td",[a._v("7")]),a._v(" "),n("td",[a._v("June 2024")])]),a._v(" "),n("tr",[n("td",[a._v("RHEL/CentOS")]),a._v(" "),n("td",[a._v("6")]),a._v(" "),n("td",[a._v("November 2020")])]),a._v(" "),n("tr",[n("td",[a._v("Fedora")]),a._v(" "),n("td",[a._v("29")]),a._v(" "),n("td",[a._v("approx. November 2019")])])])]),a._v(" "),n("p",[a._v("Add GitLab’s official repository: 添加官方仓库")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("# For Debian/Ubuntu/Mint\ncurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.deb.sh | sudo bash\n\n# For RHEL/CentOS/Fedora\ncurl -L https://packages.gitlab.com/install/repositories/runner/gitlab-runner/script.rpm.sh | sudo bash\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("Install the latest version of GitLab Runner: 安装最新版本")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("# For Debian/Ubuntu/Mint\nsudo apt-get install gitlab-runner\n\n# For RHEL/CentOS/Fedora\nsudo yum install gitlab-runner\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("To install a specific version of GitLab Runner: 安装指定版本")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("# for DEB based systems\napt-cache madison gitlab-runner\nsudo apt-get install gitlab-runner=10.0.0\n\n# for RPM based systems\nyum list gitlab-runner --showduplicates | sort -r\nsudo yum install gitlab-runner-10.0.0-1\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("p",[a._v("更新runner")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("# For Debian/Ubuntu/Mint\nsudo apt-get update\nsudo apt-get install gitlab-runner\n\n# For RHEL/CentOS/Fedora\nsudo yum update\nsudo yum install gitlab-runner\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br")])]),n("hr"),a._v(" "),n("h2",{attrs:{id:"_2-在gnu-linux上手动安装gitlab-runner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-在gnu-linux上手动安装gitlab-runner"}},[a._v("#")]),a._v(" 2. 在GNU / Linux上手动安装GitLab Runner")]),a._v(" "),n("p",[a._v("如果您不能使用"),n("a",{attrs:{href:"https://docs.gitlab.com/12.6/runner/install/linux-repository.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("deb / rpm存储库"),n("OutboundLink")],1),a._v("安装GitLab Runner，或者您的GNU / Linux操作系统不在支持的版本中，则可以使用以下一种方法手动安装它，这是最后的选择。")]),a._v(" "),n("h3",{attrs:{id:"通过deb或rpm软件包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过deb或rpm软件包"}},[a._v("#")]),a._v(" 通过"),n("code",[a._v("deb")]),a._v("或"),n("code",[a._v("rpm")]),a._v("软件包")]),a._v(" "),n("p",[n("strong",[a._v("下载软件包")])]),a._v(" "),n("ol",[n("li",[a._v("在"),n("a",{attrs:{href:"https://gitlab-runner-downloads.s3.amazonaws.com/latest/index.html",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://gitlab-runner-downloads.s3.amazonaws.com/latest/index.html上"),n("OutboundLink")],1),a._v("找到最新的文件名和选项 。")]),a._v(" "),n("li",[a._v("选择一个版本并下载二进制文件，如文档所述，该文件用于"),n("a",{attrs:{href:"https://docs.gitlab.com/12.6/runner/install/bleeding-edge.html#download-any-other-tagged-release",target:"_blank",rel:"noopener noreferrer"}},[a._v("下载任何其他标记的"),n("OutboundLink")],1),a._v(" GitLab Runner发行版。")])]),a._v(" "),n("p",[a._v("例如，对于Debian或Ubuntu：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("curl -LJO https://gitlab-runner-downloads.s3.amazonaws.com/latest/deb/gitlab-runner_<arch>.deb\n\ndpkg -i gitlab-runner_<arch>.deb\n\ndpkg -i gitlab-runner_<arch>.deb\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("例如，对于CentOS或Red Hat Enterprise Linux：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("curl -LJO https://gitlab-runner-downloads.s3.amazonaws.com/latest/rpm/gitlab-runner_<arch>.rpm\n\nrpm -i gitlab-runner_<arch>.rpm\n\nrpm -Uvh gitlab-runner_<arch>.rpm\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("h3",{attrs:{id:"使用二进制文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#使用二进制文件"}},[a._v("#")]),a._v(" 使用二进制文件")]),a._v(" "),n("p",[a._v("参考地址： https://docs.gitlab.com/12.6/runner/install/bleeding-edge.html#download-any-other-tagged-release")]),a._v(" "),n("p",[a._v("下载指定版本： 将上面URL中的latest切换为 v12.6。")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("# Linux x86-64\nsudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64\n\n# Linux x86\nsudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-386\n\n# Linux arm\nsudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm\n\n# Linux arm64\nsudo curl -L --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-arm64\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("p",[a._v("添加执行权限")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo chmod +x /usr/local/bin/gitlab-runner\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("创建一个gitlab用户")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo useradd --comment 'GitLab Runner' --create-home gitlab-runner --shell /bin/bash\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("安装并作为服务运行")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo gitlab-runner install --user=gitlab-runner --working-directory=/home/gitlab-runner\nsudo gitlab-runner start\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("更新")]),a._v(" "),n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#停止服务")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gitlab-runner stop\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#下载新版本二进制包")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("curl")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-L")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--output")]),a._v(" /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-linux-amd64\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#赋予执行权限")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("chmod")]),a._v(" +x /usr/local/bin/gitlab-runner\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[a._v("#启动服务")]),a._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" gitlab-runner start\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br")])]),n("hr"),a._v(" "),n("h2",{attrs:{id:"在macos中安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#在macos中安装"}},[a._v("#")]),a._v(" 在MacOS中安装")]),a._v(" "),n("p",[a._v("在macOS上安装GitLab Runner有两种方法：")]),a._v(" "),n("ul",[n("li",[n("a",{attrs:{href:"https://docs.gitlab.com/12.6/runner/install/osx.html#manual-installation-official",target:"_blank",rel:"noopener noreferrer"}},[a._v("手动安装"),n("OutboundLink")],1),a._v("。GitLab正式支持和推荐此方法。")]),a._v(" "),n("li",[n("a",{attrs:{href:"https://docs.gitlab.com/12.6/runner/install/osx.html#homebrew-installation-alternative",target:"_blank",rel:"noopener noreferrer"}},[a._v("自制安装"),n("OutboundLink")],1),a._v("。使用"),n("a",{attrs:{href:"https://brew.sh/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Homebrew进行"),n("OutboundLink")],1),a._v("安装，以替代手动安装。")])]),a._v(" "),n("h3",{attrs:{id:"手动安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#手动安装"}},[a._v("#")]),a._v(" 手动安装")]),a._v(" "),n("p",[a._v("下载二进制包")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo curl --output /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/v12.6/binaries/gitlab-runner-darwin-amd64\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("授予其执行权限：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("sudo chmod +x /usr/local/bin/gitlab-runner\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])]),n("p",[a._v("将Runner作为服务安装并启动它：")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("cd ~\ngitlab-runner install\ngitlab-runner start\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br")])]),n("h3",{attrs:{id:"自动安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#自动安装"}},[a._v("#")]),a._v(" 自动安装")]),a._v(" "),n("p",[a._v("安装，启动")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("brew install gitlab-runner\nbrew services start gitlab-runner\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("h3",{attrs:{id:"更新"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#更新"}},[a._v("#")]),a._v(" 更新")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("gitlab-runner stop\n\nsudo curl -o /usr/local/bin/gitlab-runner https://gitlab-runner-downloads.s3.amazonaws.com/latest/binaries/gitlab-runner-darwin-amd64\n\nsudo chmod +x /usr/local/bin/gitlab-runner\ngitlab-runner start\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("hr"),a._v(" "),n("h2",{attrs:{id:"_4-在容器中运行gitlab-runner"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-在容器中运行gitlab-runner"}},[a._v("#")]),a._v(" 4. 在容器中运行GitLab Runner")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("docker run --rm -t -id -v ~/data/gitlab-runner/config:/etc/gitlab-runner gitlab/gitlab-runner:v12.6.0 \n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br")])])])}),[],!1,null,null,null);n.default=r.exports}}]);