(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{601:function(n,s,t){"use strict";t.r(s);var a=t(0),e=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[n._v("#")]),n._v(" 介绍")]),n._v(" "),s("p",[n._v("如果还不懂什么是下载站点，请看我的下载站点："),s("a",{attrs:{href:"https://www.zzppjj.top/download/light/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nginx Directory"),s("OutboundLink")],1)]),n._v(" "),s("p",[n._v("看了我的下载站点，你会发现和 Nginx 自带的样式有些不一样，嗯？Nginx 自带的下载站点长啥样？请看"),s("a",{attrs:{href:"https://notes.youngkbt.cn/nginx/site-auth/",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nginx - 站点与认证"),s("OutboundLink")],1)]),n._v(" "),s("p",[n._v("下载站点，就是能够下载东西的网页。其实设计并没有多难，利用第三方模块，就可以实现上方效果。")]),n._v(" "),s("p",[s("strong",[n._v("本下载站点基于 Nginx 搭建的，没有 Nginx 的支持，本下载站点将会无效。")])]),n._v(" "),s("h2",{attrs:{id:"第三方模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三方模块"}},[n._v("#")]),n._v(" 第三方模块")]),n._v(" "),s("p",[n._v("首先需要实现 Nginx 自带的下载站点，了解这个后方能利用第三方模块进行美化，如果你不了解什么是模块，就认为这叫做插件。")]),n._v(" "),s("p",[n._v("我使用的是 "),s("code",[n._v("ngx-fancyindex")]),n._v(" 模块，这里提供下载地址：")]),n._v(" "),s("ul",[s("li",[n._v("GitHub 地址：https://github.com/aperezdc/ngx-fancyindex")])]),n._v(" "),s("p",[n._v("下载后，放到服务器的某个路径下，然后需要重新编译安装 Nginx，也就是说，你要备份好你之前的配置文件、静态页面目录、日志文件目录。")]),n._v(" "),s("p",[n._v("如果你试过 Nginx 的源码安装，那么一定不陌生 "),s("code",[n._v("./configure")]),n._v(" 来编译，如果不知道如何安装，请看 "),s("a",{attrs:{href:"https://notes.youngkbt.cn/nginx/install/#%E6%BA%90%E7%A0%81%E5%A4%8D%E6%9D%82%E5%AE%89%E8%A3%85",target:"_blank",rel:"noopener noreferrer"}},[n._v("Nginx - 环境准备"),s("OutboundLink")],1),n._v("。")]),n._v(" "),s("p",[n._v("进入 Nginx 的源码目录，然后执行下方命令：")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("./configure "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v(" --add-module"),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("..")]),n._v("/ngx-fancyindex/\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("make")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[n._v("&&")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("make")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[n._v("install")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("p",[n._v("其中 "),s("code",[n._v("......")]),n._v(" 是其他的模块（插件），"),s("code",[n._v("../")]),n._v(" 代表上一级目录，如果你放的路径没有与 Nginx 的源码处于一个目录，则根据你的路径进行修改。")]),n._v(" "),s("p",[n._v("进入 Nginx 配置文件配置如下内容：")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("location /download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    root /usr/local/openresty/nginx/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 指定目录所在路径")]),n._v("\n    fancyindex on"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 使用fancyindex")]),n._v("\n    fancyindex_exact_size off"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 不显示精确大小")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("root 指定存放软件的目录，我的是在 "),s("code",[n._v("/usr/local/openresty/nginx/html")]),n._v(" 目录里，该目录就是访问我的下载站点看到的根目录")]),n._v(" "),s("p",[n._v("此时访问 "),s("code",[n._v("/download")]),n._v("，就看看到如下效果")]),n._v(" "),s("p",[s("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/05/9e9ef3c6651859d3.jpg",alt:"9e9ef3c6651859d3.jpg"}})]),n._v(" "),s("p",[n._v("此时已经实现了这个第三方模块带来的效果。")]),n._v(" "),s("p",[n._v("当然，你会发现这个页面仅仅是我下载站点的红系主题，因为我使用了主题 "),s("code",[n._v("Nginx-Fancyindex-Theme")]),n._v("，这个主题有两种模式，分别为亮系主题和暗系主题，加上红系主题就是三个主题。")]),n._v(" "),s("p",[n._v("下载地址：https://github.com/lanffy/Nginx-Fancyindex-Theme/")]),n._v(" "),s("p",[n._v("不知道如何下载？使用 "),s("code",[n._v("git clone")]),n._v(" 指令：")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[n._v("git")]),n._v(" clone https://github.com/lanffy/Nginx-Fancyindex-Theme/\n\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[n._v("下载后，放在 Nginx 的静态页面 html 目录里")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("mv /opt/Nginx-Fancyindex-Theme /usr/local/nginx/html/\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("p",[n._v("然后在原来的配置文件修改内容：")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("location /download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    root /usr/local/openresty/nginx/html"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 指定目录所在路径")]),n._v("\n    include /usr/local/nginx/html//Nginx-Fancyindex-Theme/fancyindex.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 主题的配置文件")]),n._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("p",[n._v("引用 "),s("code",[n._v("Nginx-Fancyindex-Theme")]),n._v(" 里的 "),s("code",[n._v("fancyindex.conf")]),n._v(" 配置文件即可实现亮系主题，如果你不喜欢放在 Nginx 的静态页面 html 目录里，那么上方内容也要修改成主题配置文件的路径。")]),n._v(" "),s("p",[n._v("如果想要暗系主题，则修改 "),s("code",[n._v("fancyindex.conf")]),n._v(" 的内容，注释掉亮系主题的引入（"),s("code",[n._v("fancyindex_header")]),n._v(" 和 "),s("code",[n._v("fancyindex_footer")]),n._v("），加入暗系主题的引用（"),s("code",[n._v("fancyindex_header")]),n._v(" 和 "),s("code",[n._v("fancyindex_footer")]),n._v("）。")]),n._v(" "),s("p",[n._v("此时主题已经完全实现，但是你会发现我的下载站点有些不一样，因为我稍微修改了一些内容：")]),n._v(" "),s("ul",[s("li",[s("p",[n._v("三个主题的可切换")])]),n._v(" "),s("li",[s("p",[n._v("修改 "),s("code",[n._v("File Name")]),n._v("、"),s("code",[n._v("File Size")]),n._v("、"),s("code",[n._v("Date")])])]),n._v(" "),s("li",[s("p",[n._v("修改 "),s("code",[n._v("Date")]),n._v(" 的月份英文为中文")])]),n._v(" "),s("li",[s("p",[n._v("颜色突出，字体修改")])])]),n._v(" "),s("p",[n._v("如果你喜欢我的下载站点，这里提供我的源码地址https://www.zzppjj.top/download/light/myNginx-Theme.tar.gz进行下载。")]),n._v(" "),s("p",[n._v("下载后，解压到静态文件 html 目录下，然后在配置文件填入内容：")]),n._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[n._v("location /download/light "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v("  /usr/local/openresty/nginx/html/download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 以这些后缀的文件点击后为下载，注释掉则 txt 等文件是在网页打开并查看内容")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# if ($request_filename ~* ^.*?\\.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx|conf)$){")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#   add_header Content-Disposition 'attachment;';")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# }")]),n._v("\n        include /usr/local/openresty/nginx/html/Nginx-Fancyindex-Theme/light.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    \n    location /download/dark "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v("  /usr/local/openresty/nginx/html/download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 以这些后缀的文件点击后为下载，注释掉则 txt 等文件是在网页打开并查看内容")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# if ($request_filename ~* ^.*?\\.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx|conf)$){")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#   add_header Content-Disposition 'attachment;';")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# }")]),n._v("\n        include /usr/local/openresty/nginx/html/Nginx-Fancyindex-Theme/dark.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    \n    location /download/red "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[n._v("alias")]),n._v("  /usr/local/openresty/nginx/html/download"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# 以这些后缀的文件点击后为下载，注释掉则 txt 等文件是在网页打开并查看内容")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# if ($request_filename ~* ^.*?\\.(txt|doc|pdf|rar|gz|zip|docx|exe|xlsx|ppt|pptx|conf)$){")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("#   add_header Content-Disposition 'attachment;';")]),n._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[n._v("# }")]),n._v("\n        include /usr/local/openresty/nginx/html/Nginx-Fancyindex-Theme/red.conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(";")]),n._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br")])]),s("p",[n._v("如果你不喜欢放在 html 目录下，那么上方代码的 "),s("code",[n._v("include")]),n._v(" 也要改变成所在路径的配置文件。")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("[原文链接]("),s("a",{attrs:{href:"https://notes.youngkbt.cn/about/index/download/#%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A8%A1%E5%9D%97",target:"_blank",rel:"noopener noreferrer"}},[n._v("首页 - 下载站点 | Young Kbt blog"),s("OutboundLink")],1),n._v(")")])])}),[],!1,null,null,null);s.default=e.exports}}]);