(window.webpackJsonp=window.webpackJsonp||[]).push([[269],{622:function(s,t,a){"use strict";a.r(t);var e=a(0),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h2",{attrs:{id:"一、账号安全控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#一、账号安全控制"}},[s._v("#")]),s._v(" 一、账号安全控制")]),s._v(" "),t("h3",{attrs:{id:"_1、基本安全措施"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、基本安全措施"}},[s._v("#")]),s._v(" 1、基本安全措施")]),s._v(" "),t("h4",{attrs:{id:"_1、系统账号清理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、系统账号清理"}},[s._v("#")]),s._v(" 1、系统账号清理")]),s._v(" "),t("p",[t("strong",[s._v('grep "/sbin/nologin$" /etc/passwd')]),s._v(" // 查找登录 Shell 是 /sbin/nologin 的用户")]),s._v(" "),t("p",[t("strong",[s._v("usermod -L")]),s._v(" "),t("strong",[s._v("账号名称")]),s._v(" // 锁定账号")]),s._v(" "),t("p",[t("strong",[s._v("passwd -S")]),s._v(" "),t("strong",[s._v("账号名称")]),s._v(" // 查看账号状态")]),s._v(" "),t("p",[t("strong",[s._v("usermod -U")]),s._v(" "),t("strong",[s._v("账号名称")]),s._v(" // 解锁账号")]),s._v(" "),t("p",[t("strong",[s._v("chattr +i /etc/passwd /etc/shadow")]),s._v(" // 锁定文件")]),s._v(" "),t("p",[t("strong",[s._v("Isattr /etc/passwd /etc/shadow")]),s._v(" // 查看为锁定的状态")]),s._v(" "),t("p",[t("strong",[s._v("chattr -i /etc/passwd /etc/shadow")]),s._v(" // 解锁文件")]),s._v(" "),t("p",[t("strong",[s._v("Isattr /etc/passwd /etc/shadow")]),s._v(" // 查看为解锁的状态")]),s._v(" "),t("h4",{attrs:{id:"_2、密码安全控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、密码安全控制"}},[s._v("#")]),s._v(" 2、密码安全控制")]),s._v(" "),t("p",[s._v("/etc/pam.d/password-auth")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("password    requisite     pam_pwquality.so try_first_pass local_users_only "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("retry")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("authtok_type")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("difok")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("minlen")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ucredit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("lcredit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("dcredit")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("-1 \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("ul",[t("li",[s._v("difok= 定义新密码中必须要有几个字符和旧密码不同")]),s._v(" "),t("li",[s._v("minlen = 新密码的最小长度")]),s._v(" "),t("li",[s._v("ucredit= 新密码中可以包含的大写字母的最大数目。-1 至少一个")]),s._v(" "),t("li",[s._v("lcredit = 新密码中可以包含的小写字母的最大数")]),s._v(" "),t("li",[s._v("dcredit = 定新密码中可以包含的数字的最大数目")])]),s._v(" "),t("p",[s._v('注：这个密码强度的设定只对 "普通用户" 有限制作用，root 用户无论修改自己的密码还是修改普通用户的时候，不符合强度设置依然可以设置成功')]),s._v(" "),t("p",[s._v("1、将密码的有效期设为 30 天，")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/login.defs              //适用于新建的用户")]),s._v("\nPASS_MAX_DAYS   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chage -M 30 lisi             //适用于已有的用户")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("2、强制要求用户下次登录时重设密码")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# chage -d 0 lisi")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h4",{attrs:{id:"_3、命令历史、自动注销"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、命令历史、自动注销"}},[s._v("#")]),s._v(" 3、命令历史、自动注销")]),s._v(" "),t("p",[s._v("1、设置最多只记录 200 条历史命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/profile             //适用于新登录用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("HISTSIZE")])]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("200")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# export HISTSIZE=200             //适用于当前用户")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("2、当用户退出已登录 Bash 环境以后，所记录的历史命令将自动清空")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim ~/.bash_logout ")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("history")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-c")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("clear")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("3、当超过指定的时间没有任何输入时即自动注销终端，闲置超时由变量 TMOUT 来控制，默认单位为秒估）")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/profile             //适用于新登录用户")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("export")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("TMOUT")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("600")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# export TMOUT=600             //适用于当前用户")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"_2、用户切换与提权"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、用户切换与提权"}},[s._v("#")]),s._v(" 2、用户切换与提权")]),s._v(" "),t("h4",{attrs:{id:"_1、su-命令-切换用户"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、su-命令-切换用户"}},[s._v("#")]),s._v(" 1、su 命令：切换用户")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - root")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("借助于 pam_wheel 认证模块，只允许极个别用户使用 su 命令进行切换")]),s._v(" "),t("p",[s._v("将授权使用 su 命令的用户添加到 wheel 组，修改 /etc/pam. d/su 认证配置以启用 pam_wheel 认证")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gpasswd -a zhangsan wheel")]),s._v("\n正在将用户“zhangsan”加入到“wheel”组中\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grep wheel /etc/group")]),s._v("\nwheel:x:10:lisi,zhangsan\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/pam.d/su")]),s._v("\nauth            required        pam_wheel.so use_uid             //去掉此行开头的＃号\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("p",[s._v("启用 pam_wheel 认证以后，未加入到 wheel 组内的其他用户将无法使用 su 命令")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - zhangsan")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("zhangsan@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - root\n密码：\n上一次登录：四 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("月 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20")]),s._v(":31:08 CST 2020pts/0 上\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# su - wangwu")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("wangwu@localhost ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("su")]),s._v(" - root\n密码：\nsu: 拒绝权限\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"_2、-用户帐号限制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、-用户帐号限制"}},[s._v("#")]),s._v(" 2、 用户帐号限制")]),s._v(" "),t("ul",[t("li",[t("p",[t("code",[s._v("/etc/login.defs")]),s._v(" 配置文件是设置用户帐号限制的文件，可配置密码的最大过期天数，密码的最大长度约束等内容。")])]),s._v(" "),t("li",[t("p",[s._v("该文件里的配置对 root 用户无效。此文件中的配置与 "),t("code",[s._v("/etc/passwd")]),s._v(" 和 "),t("code",[s._v("/etc/shadow")]),s._v(" 文件中的用户信息有冲突时，系统会以 "),t("code",[s._v("/etc/passwd")]),s._v(" 和 "),t("code",[s._v("/etc/shadow")]),s._v(" 为准。")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("/etc/login.defs")]),s._v(" 文件用于在 Linux 创建用户时，对用户的一些基本属性做默认设置，例如指定用户 UID 和 GID 的范围，用户的过期时间，密码的最大长度，等等。")])])]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("设置项")]),s._v(" "),t("th",[s._v("含义")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("MAIL_DIR /var/spool/mail")]),s._v(" "),t("td",[s._v("创建用户时，系统会在目录 /var/spool/mail 中创建一个用户邮箱，比如 lamp 用户的邮箱是 /var/spool/mail/lamp。")])]),s._v(" "),t("tr",[t("td",[s._v("PASS_MAX_DAYS 99999")]),s._v(" "),t("td",[s._v("密码有效期，99999 是自 1970 年 1 月 1 日起密码有效的天数，相当于 273 年，可理解为密码始终有效。")])]),s._v(" "),t("tr",[t("td",[s._v("PASS_MIN_DAYS 0")]),s._v(" "),t("td",[s._v("表示自上次修改密码以来，最少隔多少天后用户才能再次修改密码，默认值是 0。")])]),s._v(" "),t("tr",[t("td",[s._v("PASS_MIN_LEN 5")]),s._v(" "),t("td",[s._v("指定密码的最小长度，默认不小于 5 位，但是现在用户登录时验证已经被 PAM 模块取代，所以这个选项并不生效。")])]),s._v(" "),t("tr",[t("td",[s._v("PASS_WARN_AGE 7")]),s._v(" "),t("td",[s._v("指定在密码到期前多少天，系统就开始通过用户密码即将到期，默认为 7 天。")])]),s._v(" "),t("tr",[t("td",[s._v("UID_MIN 500")]),s._v(" "),t("td",[s._v("指定最小 UID 为 500，也就是说，添加用户时，默认 UID 从 500 开始。注意，如果手工指定了一个用户的 UID 是 550，那么下一个创建的用户的 UID 就会从 551 开始，哪怕 500~549 之间的 UID 没有使用。")])]),s._v(" "),t("tr",[t("td",[s._v("UID_MAX 60000")]),s._v(" "),t("td",[s._v("指定用户最大的 UID 为 60000。")])]),s._v(" "),t("tr",[t("td",[s._v("GID_MIN 500")]),s._v(" "),t("td",[s._v("指定最小 GID 为 500，也就是在添加组时，组的 GID 从 500 开始。")])]),s._v(" "),t("tr",[t("td",[s._v("GID_MAX 60000")]),s._v(" "),t("td",[s._v("用户 GID 最大为 60000。")])]),s._v(" "),t("tr",[t("td",[s._v("CREATE_HOME yes")]),s._v(" "),t("td",[s._v("指定在创建用户时，是否同时创建用户主目录，yes 表示创建，no 则不创建，默认是 yes。")])]),s._v(" "),t("tr",[t("td",[s._v("UMASK 077")]),s._v(" "),t("td",[s._v("用户主目录的权限默认设置为 077。")])]),s._v(" "),t("tr",[t("td",[s._v("USERGROUPS_ENAB yes")]),s._v(" "),t("td",[s._v("指定删除用户的时候是否同时删除用户组，准备地说，这里指的是删除用户的初始组，此项的默认值为 yes。")])]),s._v(" "),t("tr",[t("td",[s._v("ENCRYPT_METHOD SHA512")]),s._v(" "),t("td",[s._v("指定用户密码采用的加密规则，默认采用 SHA512，这是新的密码加密模式，原先的 Linux 只能用 DES 或 MD5 加密。")])])])]),s._v(" "),t("h2",{attrs:{id:"二、系统引导和登录控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#二、系统引导和登录控制"}},[s._v("#")]),s._v(" 二、系统引导和登录控制")]),s._v(" "),t("h3",{attrs:{id:"_1、开关机安全控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、开关机安全控制"}},[s._v("#")]),s._v(" 1、开关机安全控制")]),s._v(" "),t("h4",{attrs:{id:"_1、调整-bios-引导设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、调整-bios-引导设置"}},[s._v("#")]),s._v(" 1、调整 BIOS 引导设置")]),s._v(" "),t("ul",[t("li",[s._v("（1）将第一优先引导设备 (First Boot Device) 设为当前系统所在磁盘。")]),s._v(" "),t("li",[s._v('（2）禁止从其他设备 (如光盘、U 盘、网络等) 引导系统，对应的项设为 "Disabled"。')]),s._v(" "),t("li",[s._v('（3）将 BOS 的安全级别改为 "setup"，并设置好管理密码，以防止未授权的修改。')])]),s._v(" "),t("h4",{attrs:{id:"_2、禁止-ctrl-alt-del-快捷键重启"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、禁止-ctrl-alt-del-快捷键重启"}},[s._v("#")]),s._v(" 2、禁止 Ctrl+Alt+Del 快捷键重启")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# systemctl mask ctrl-alt-del.target              //禁止Ctrl+Alt+Del快捷键重启\nCreated symlink from /etc/systemd/system/ctrl-alt-del.target to /dev/null.\n# systemctl daemon-reload              //刷新配置\n# systemctl unmask ctrl-alt-del.target             //开启Ctrl+Alt+Del快捷键重启\n# systemctl daemon-reload             //刷新配置\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h4",{attrs:{id:"_3、限制更改-grub-引导参数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3、限制更改-grub-引导参数"}},[s._v("#")]),s._v(" 3、限制更改 GRUB 引导参数")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grub2-mkpasswd-pbkdf2 ")]),s._v("\n输入口令：\nReenter password: \nPBKDF2 "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("hash")]),s._v(" of your password is grub.pbkdf2.sha512.10000.0231854D0AD301240629102B62FCFB09E7347E7E3254E34ACE0186A41BA65A2A749B6A5F59AC37B6431649D5D0F3238CFC2ED92C407468C0CE2B29C2F3FFF9A8.1906AC682652E7EEC736AC3F4E866D2C5038EB4AED72D980331CE80ED4D05A9929F043A5EB7190FD3775294CE50FCFA745C16E783A93E52F77E0D3A9695C246A\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /boot/grub2/grub.cfg /boot/grub2/grub.cfg.bak")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cp /etc/grub.d/00_header /etc/grub.d/00_header.bak")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/grub.d/00_header")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\ncat"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('EOF\nset superusers = "root"\npassword_pbkdf2 root grub.pbkdf2.sha512.10000.0231854D0AD301240629102B62FCFB09E7347E7E3254E34ACE0186A41BA65A2A749B6A5F59AC37B6431649D5D0F3238CFC2ED92C407468C0CE2B29C2F3FFF9A8.1906AC682652E7EEC736AC3F4E866D2C5038EB4AED72D980331CE80ED4D05A9929F043A5EB7190FD3775294CE50FCFA745C16E783A93E52F77E0D3A9695C246A\nEOF')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# grub2-mkconfig -o /boot/grub2/grub.cfg")]),s._v("\nGenerating grub configuration "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\nFound linux image: /boot/vmlinuz-3.10.0-1127.8.2.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1127.8.2.el7.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-1062.18.1.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-1062.18.1.el7.x86_64.img\nFound linux image: /boot/vmlinuz-3.10.0-957.el7.x86_64\nFound initrd image: /boot/initramfs-3.10.0-957.el7.x86_64.img\nFound linux image: /boot/vmlinuz-0-rescue-fc8e001937cb4a35b289459e53090806\nFound initrd image: /boot/initramfs-0-rescue-fc8e001937cb4a35b289459e53090806.img\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br")])]),t("h3",{attrs:{id:"_2、终端登录控制"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、终端登录控制"}},[s._v("#")]),s._v(" 2、终端登录控制")]),s._v(" "),t("p",[s._v("1、禁止 root 用户登录")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim /etc/securetty             //禁止root用户从tty5、tty6登录")]),s._v("\ntty1\ntty2\ntty3\ntty4\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tty5")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#tty6")]),s._v("\ntty7\ntty8\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[s._v("2、禁止普通用户登录（root 用户不受限制），当手动删除 /etc/nologin 文件或者重新启动主机以后，即可恢复正常。")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# touch /etc/nologin")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:""}},[t("a",{staticClass:"header-anchor",attrs:{href:"#"}},[s._v("#")])]),s._v(" "),t("p",[s._v("三、弱口令检测、端口扫描")]),s._v(" "),t("h3",{attrs:{id:"_1、弱口令检测-john-the-ripper"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、弱口令检测-john-the-ripper"}},[s._v("#")]),s._v(" 1、弱口令检测 ——John the Ripper")]),s._v(" "),t("p",[s._v("安装 John the Ripper")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/94ab7e82c75e5eff.png",alt:""}})]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/c69ee949251d1dd2.png",alt:""}})]),s._v(" "),t("p",[s._v("查看已破解出的账户列表")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/db8af73b2266d252.png",alt:""}})]),s._v(" "),t("p",[s._v("使用密码字典文件")]),s._v(" "),t("p",[s._v("清空己破解出的账户列表后重新分析")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/a7772518eb4c2bb6.png",alt:""}})]),s._v(" "),t("h3",{attrs:{id:"_2、网络扫描-nmap"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2、网络扫描-nmap"}},[s._v("#")]),s._v(" 2、网络扫描 ——NMAP")]),s._v(" "),t("h4",{attrs:{id:"_1、安装-nmap-软件包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1、安装-nmap-软件包"}},[s._v("#")]),s._v(" 1、安装 NMAP 软件包")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("# yum -y install nmap\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("1")]),s._v(" "),t("table",[t("thead",[t("tr",[t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")]),s._v(" "),t("th",[s._v("参数")]),s._v(" "),t("th",[s._v("说明")])])]),s._v(" "),t("tbody",[t("tr",[t("td",[s._v("-p")]),s._v(" "),t("td",[s._v("指定扫描的端口")]),s._v(" "),t("td",[s._v("-n")]),s._v(" "),t("td",[s._v("禁用反向 DNS 解析（以加快扫描速度）")])]),s._v(" "),t("tr",[t("td",[s._v("-sS")]),s._v(" "),t("td",[s._v("查看目标端口是否正在监听，并立即断开连接；否则认为目标端口并未开放")]),s._v(" "),t("td",[s._v("-sT")]),s._v(" "),t("td",[s._v("查看目标端口正在监听服务，否则认为目标端口并未开放")])]),s._v(" "),t("tr",[t("td",[s._v("-sF")]),s._v(" "),t("td",[s._v("间接检测防火墙的健壮性")]),s._v(" "),t("td",[s._v("-sU")]),s._v(" "),t("td",[s._v("探测目标主机提供哪些 UDP 服务")])]),s._v(" "),t("tr",[t("td",[s._v("-sP")]),s._v(" "),t("td",[s._v("快速判断目标主机是否存活")]),s._v(" "),t("td",[s._v("-P0")]),s._v(" "),t("td",[s._v("跳过 ping 检测")])])])]),s._v(" "),t("p",[s._v("扫描常用的 TCP 端口")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/1d921a75936153c8.png",alt:""}})]),s._v(" "),t("p",[s._v("扫描常用的 UDP 端口")]),s._v(" "),t("p",[t("img",{attrs:{src:"http://pic.zzppjj.top/LightPicture/2023/02/d0765ab9c238a8b8.png",alt:""}})]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("p",[s._v("检查 192.168.4.0/24 网段中有哪些主机提供 FTP 服务：nmap -p 21 192.168.4.0/24")]),s._v(" "),t("p",[s._v("检测 192.168.4.0/24 网段中有哪些存活主机（能 ping 通)：nmap -n -sP 192.168.4.0/24")]),s._v(" "),t("p",[s._v("检测 IP 地址位于 192.168.4.100-200 的主机是否开启文件共享服务：nmap -p 139，445 192.168.4.100-200")])])}),[],!1,null,null,null);t.default=n.exports}}]);